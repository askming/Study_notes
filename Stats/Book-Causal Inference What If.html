
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>[book] Causal Inference: What If &#8212; Study Notes</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script src="https://wavedrom.com/skins/default.js"></script>
    <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="[book] Causal inference in statistics a primer" href="Book-Causal_inference_in_statistics_a_primer.html" />
    <link rel="prev" title="[book] Analysis of Observational Health Care Data Using SAS" href="Book-Analysis%20of%20Observational%20Health%20Care%20Data%20Using%20SAS.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Study Notes</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Study Notes Index (knowledge base structure)
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Statistics
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Book-Analysis%20of%20Observational%20Health%20Care%20Data%20Using%20SAS.html">
   [book] Analysis of Observational Health Care Data Using SAS
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   [book] Causal Inference: What If
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Book-Causal_inference_in_statistics_a_primer.html">
   [book] Causal inference in statistics
   <em>
    a primer
   </em>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Book-Data_Analysis_Using_Regression_and_Multilevel_Hierarchical_Models.html">
   [book] Data Analysis Using Regression and Multilevel/Hierarchical Models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Book-Fundamentals%20of%20Clinical%20Trials%20%284th%20edition%29.html">
   [book] Fundamentals of Clinical Trials (4th edition)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Book-Group%20Sequential%20and%20Confirmatory%20Adaptive%20Designs%20in%20Clinical%20Trials.html">
   [book] Group Sequential and Confirmatory Adaptive Designs in Clinical Trials
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Book-Regression%20Modeling%20Strategies.html">
   [book] Regression Modeling Strategies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Adaptive%20Trial%20Design.html">
   Adaptive Clinical Trial Design
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Analysis%20of%20Ordinal%20Outcome.html">
   Analysis of ordinal outcome
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Analysis%20of%20Stratified%20Randomization%20Trial%20Data.html">
   Why analysis of stratified randomization trial data need to account for the stratification factors?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Association%20vs.%20Prediction%20vs.%20Causation.html">
   Association vs. Prediction vs. Causation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Baseline%20Adaptive%20Randomization.html">
   Baseline adaptive randomization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Bayesian%20optimization.html">
   Exploring Bayesian Optimization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Causal%20inference%20general.html">
   Causal Inference General Study Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Competing_Risk_Regression.html">
   Competing risk models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Correlated%20Data%20Analysis.html">
   Correlated/Longitudinal Data Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Cox_PH_model.html">
   ​Cox PH model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Dirichlet%20process.html">
   Dirichlet process
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-FDA%20guidances%20for%20industry.html">
   Notes on FDA Guidances for Industry
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Gaussian%20process.html">
   Gaussain Process
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Group_Sequential_Trial_Design.html">
   Notes on Group Sequential Trial Design​
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-ICH%20guidelines.html">
   Notes on ICH guidelines​
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-MDD%20%26%20Effect%20size.html">
   Power,
   <strong>
    MDD
   </strong>
   /
   <strong>
    E
   </strong>
   (minimum detectable difference/effect), and
   <strong>
    Effect size
   </strong>
   in clinical trials
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Meta-Analysis.html">
   Meta-analysis​
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Missing%20data.html">
   Missing data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Model%20comparison%20methods.html">
   Model comparison methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Monte%20Carlo%20method.html">
   Monte Carlo Method
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Multicolinearity.html">
   Multicolinearity
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Multiplicity%20in%20Clinical%20Trials.html">
   Multiplicity in Clinical Trials
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Non-inferiority%20equivalence%20superiority%20test.html">
   Non-inferiority/equivalence/superiority test basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Observational%20study%20design.html">
   Observational study design
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Propensity%20score%20methods.html">
   Propensity Score Methods &amp; Implementation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Quantile%20regression.html">
   Quantile regression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Sample_size_calculation_with_WMW_test.html">
   Sample size calculation for the Wilcoxon-Mann-Whitney test adjusting for ties
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Survival_Analysis.html">
   Survival Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="%C2%A0Note-Trimmed%20means%20analysis.html">
   Trimmed means analysis
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Statistical computing
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Stats_Comp/Note-How%20R%20searches%20and%20finds%20stuff.html">
   How R searches and finds stuff
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Stats_Comp/Note-Pandas.html">
   Pandas study note
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Stats_Comp/Note-R%20notes.html">
   R study notes/tips
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Stats_Comp/Note-googleVis.html">
   Google R package googleVis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Stats_Comp/Note-matplotlib.html">
   Notes on
   <code class="docutils literal notranslate">
    <span class="pre">
     matplotlib
    </span>
   </code>
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  DS/ML
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Book-Hands-On%20Machine%20Learning%20with%20Scikit-Learn%20and%20TensorFlow.html">
   [book] Hands-On Machine Learning with Scikit-Learn and TensorFlow
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Book-Python%20Data%20Science%20Handbook.html">
   [book] Python Data Science Handbook
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Course-Udemy-%20Python%20for%20Data%20Science%20and%20Machine%20Learning%20Bootcamp.html">
   Udemy: Python for Data Science and Machine Learning Bootcamp
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Note-Boosting.html">
   Boosting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Note-Cluster%20analysis.html">
   Cluster analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Note-Machine%20Learning%20%28General%29.html">
   ​Machine Learning (General)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Note-Naive%20Bayes.html">
   Naive Bayes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Note-Stochasitic%20Gradient%20Descent.html">
   Stochastic Gradient Decent (SGD)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Note-Tree%2C%20Random%20Forest%20%28Bagging%29.html">
   Tree/Random Forest (Bagging)
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Computer science
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Course-%E5%BB%96%E9%9B%AA%E5%B3%B0python%E6%95%99%E7%A8%8B%E7%AC%94%E8%AE%B0.html">
   廖雪峰python教程笔记
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-HTML%20basics.html">
   HTML Basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-Hard%20SQL%20interview%20questions.html">
   Hard Data Analyst SQL Interview Questions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-Inside%20look%20at%20modern%20web%20browser.html">
   Inside look at modern web browser
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-Learning%20React.html">
   Learning React
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-Learning%20Rust.html">
   Learning Rust
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-Modern%20JS%20explained.html">
   Modern JavaScript Explained
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-Python%20numpy.html">
   Numpy study notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-SQL%20Study%20Notes.html">
   SQL study notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-git%20and%20github.html">
   git and github
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Math
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Math/Course-Essence%20of%20linear%20algebra.html">
   Essence of linear algebra
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Miscellaneous
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Miscellaneous/Early%20managment%20of%20patients%20with%20AIS.html">
   Early management of patients with acute ischemic stroke
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Miscellaneous/Miscellaneous%20Notes.html">
   Miscellaneous Study Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Miscellaneous/Phamaceutical%20development.html">
   Pharmacedutical development
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Miscellaneous/Sim-Coin%20flip.html">
   :bulb: Q: fair coin, # of flips to get two consecutive side (H or T)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Miscellaneous/Sim-Generate%20random%20number%20between%201%20to%207.html">
   Generate random number 1 to 7 using a fair dice
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/askming/study_notes"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/askming/study_notes/issues/new?title=Issue%20on%20page%20%2FStats/Book-Causal Inference What If.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/Stats/Book-Causal Inference What If.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chapter-2-randomized-experiments">
   Chapter 2 Randomized Experiments
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#randomization">
     2.1 Randomization
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conditional-randomization">
     2.2 Conditional randomization
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#standardization">
     2.3 Standardization
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inverse-probability-weighting-ipw">
     2.4 Inverse probability weighting (IPW)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chapter-4-effect-modification">
   Chapter 4 Effect Modification
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#definitionof-effect-modification-what-and-why-effect-modification">
     4.1 &amp; 4.3 Definitionof effect modification (what) and why effect modification
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-quantify-effect-modification">
     4.2, 4.4, &amp; 4.5 How to quantify effect modification
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#stratification">
       Stratification
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#adjustment-via-stratification">
       Adjustment via stratification
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#adjustment-via-matching">
       Adjustment via matching
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#fine-and-tech-points-4-1-causal-effect-in-the-treated-untreated">
       Fine and Tech Points 4.1 Causal effect in the treated/untreated
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#summary">
     4.6 Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chapter-5-interaction">
   Chapter 5 Interaction
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#interaction-requires-a-joint-intervention">
     5.1 Interaction requires a joint intervention
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#identifying-interaction">
     5.2 Identifying interaction
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#counterfactual-response-types-and-interaction">
     5.3 Counterfactual response types and interaction
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sufficient-causes-5-5-sufficient-causes-interaction-5-6">
     5.4 Sufficient causes &amp; 5.5 Sufficient causes interaction &amp; 5.6
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chapter-6-graphical-representation-of-causal-effects">
   Chapter 6 Graphical representation of causal effects
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#causal-diagrams">
     6.1 Causal diagrams
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#causal-diagrams-and-marginal-independence-conditional-independence-positivity-and-consistency">
     6.2-6.4 Causal diagrams and marginal independence, conditional independence, positivity and consistency
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-structural-classification-of-bias">
     6.5 A structural classification of bias
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-structure-of-effect-modification">
     6.6 The structure of effect modification
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chapter-7-confounding">
   Chapter 7 Confounding
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#confounding-and-confounders-7-1-7-4">
     Confounding and confounders (7.1 &amp; 7.4)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-structure-type-of-confounding-7-1">
     The structure (type) of confounding (7.1)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#confounding-and-exchangeability-7-2-backdoor-criterion-7-3-front-door-criterion-7-6">
     Confounding and exchangeability (7.2), Backdoor criterion (7.3) &amp; front door criterion (7.6)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#single-world-intervention-graphs-7-5">
     Single-world intervention graphs (7.5)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#confounding-adjustment-7-6">
     Confounding adjustment (7.6)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chapter-8-selection-bias">
   Chapter 8 Selection bias
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>[book] Causal Inference: What If</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chapter-2-randomized-experiments">
   Chapter 2 Randomized Experiments
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#randomization">
     2.1 Randomization
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conditional-randomization">
     2.2 Conditional randomization
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#standardization">
     2.3 Standardization
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inverse-probability-weighting-ipw">
     2.4 Inverse probability weighting (IPW)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chapter-4-effect-modification">
   Chapter 4 Effect Modification
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#definitionof-effect-modification-what-and-why-effect-modification">
     4.1 &amp; 4.3 Definitionof effect modification (what) and why effect modification
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-quantify-effect-modification">
     4.2, 4.4, &amp; 4.5 How to quantify effect modification
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#stratification">
       Stratification
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#adjustment-via-stratification">
       Adjustment via stratification
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#adjustment-via-matching">
       Adjustment via matching
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#fine-and-tech-points-4-1-causal-effect-in-the-treated-untreated">
       Fine and Tech Points 4.1 Causal effect in the treated/untreated
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#summary">
     4.6 Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chapter-5-interaction">
   Chapter 5 Interaction
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#interaction-requires-a-joint-intervention">
     5.1 Interaction requires a joint intervention
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#identifying-interaction">
     5.2 Identifying interaction
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#counterfactual-response-types-and-interaction">
     5.3 Counterfactual response types and interaction
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sufficient-causes-5-5-sufficient-causes-interaction-5-6">
     5.4 Sufficient causes &amp; 5.5 Sufficient causes interaction &amp; 5.6
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chapter-6-graphical-representation-of-causal-effects">
   Chapter 6 Graphical representation of causal effects
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#causal-diagrams">
     6.1 Causal diagrams
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#causal-diagrams-and-marginal-independence-conditional-independence-positivity-and-consistency">
     6.2-6.4 Causal diagrams and marginal independence, conditional independence, positivity and consistency
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-structural-classification-of-bias">
     6.5 A structural classification of bias
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-structure-of-effect-modification">
     6.6 The structure of effect modification
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chapter-7-confounding">
   Chapter 7 Confounding
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#confounding-and-confounders-7-1-7-4">
     Confounding and confounders (7.1 &amp; 7.4)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-structure-type-of-confounding-7-1">
     The structure (type) of confounding (7.1)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#confounding-and-exchangeability-7-2-backdoor-criterion-7-3-front-door-criterion-7-6">
     Confounding and exchangeability (7.2), Backdoor criterion (7.3) &amp; front door criterion (7.6)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#single-world-intervention-graphs-7-5">
     Single-world intervention graphs (7.5)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#confounding-adjustment-7-6">
     Confounding adjustment (7.6)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chapter-8-selection-bias">
   Chapter 8 Selection bias
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="book-causal-inference-what-if">
<h1>[book] Causal Inference: What If<a class="headerlink" href="#book-causal-inference-what-if" title="Permalink to this headline">#</a></h1>
<p><em>by Miguel A. Hernan and James M. Robins</em></p>
<section id="chapter-2-randomized-experiments">
<h2>Chapter 2 Randomized Experiments<a class="headerlink" href="#chapter-2-randomized-experiments" title="Permalink to this headline">#</a></h2>
<section id="randomization">
<h3>2.1 Randomization<a class="headerlink" href="#randomization" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>Counterfacatual: <span class="math notranslate nohighlight">\(Y^a\)</span> the “theoretical” outcome under certain treatment <span class="math notranslate nohighlight">\(a\)</span></p></li>
</ul>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>Note  <span class="math notranslate nohighlight">\(Y^a\perp\!\!\!\perp A\)</span> is different from  <span class="math notranslate nohighlight">\(Y\perp\!\!\!\perp A\)</span></p>
</aside>
<ul class="simple">
<li><p><strong>Exchangeability</strong> assumption: <span class="math notranslate nohighlight">\(Y^a\perp\!\!\!\perp A\)</span>, the counterfacatual is independent of actual treatment assigned; i.e. the counterfacatual is “fixed” no matter what treatment the subject receives. It can be observed if the actual treatment received is the same as the counterfactual treatment.</p></li>
<li><p><strong>Mean exchangeability</strong>: <span class="math notranslate nohighlight">\(E[Y^a|A=1] = E[Y^a|A=0] \text{ for all } a\)</span></p>
<ul>
<li><p>Exchangeability implies mean exchangeability, but not verse vasa (e.g. due to the difference in other distributional parameter, such as variance)</p></li>
<li><p>For dichotomous outcomes, exchangeability is equivalent to mean exchangeability</p></li>
</ul>
</li>
<li><p><mark>In ideal randomized experiments association is causation.</mark></p></li>
</ul>
</section>
<section id="conditional-randomization">
<h3>2.2 Conditional randomization<a class="headerlink" href="#conditional-randomization" title="Permalink to this headline">#</a></h3>
<ul>
<li><p><em>Conditionally randomized experiments</em> meaning there are several randomization probabilities that depend (are conditional) on the values of some variable(s) <span class="math notranslate nohighlight">\(L\)</span>.</p></li>
<li><p><em>Marginally randomized experiments</em> meaning there is only a single unconditional (marginal) randomization probability (doesn’t need to be 0.5) that is common to all individuals.</p>
<ul class="simple">
<li><p>a marginally randomized experiment is expected to result in exchangeability of the treated and the untreated:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
  Pr(Y^a=1|A=1) = Pr(Y^a=1|A=0) \text{ or } Y^a \perp\!\!\!\perp A \text{ for all } a
  \]</div>
</li>
</ul>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>This imbalance indicates that the risk of bad outcome in treated, had they remained untreated, would have been higher than that in the untreated.</p>
</aside>
<ul>
<li><p>In contrast, a conditionally randomized experiment will not generally result in exchangeability of the treated and the untreated because, by design, each group may have a different proportion of individuals with bad prognosis.</p></li>
<li><p>However, the conditional (or stratified) randomization can be considered as a combination of separate marginal randomiztions from each unique stratum defined by the randomization factors, within which the general rules of marginal randomization and causal inference apply, that is</p>
<div class="math notranslate nohighlight">
\[
  Pr[Y^a=1|A =1, L=l]=Pr[Y^a=1|A =0, L=l] \text{ or } Y^a \perp\!\!\!\perp A|L=l \text{ for all } a
  \]</div>
</li>
<li><p>To calculate the population average causal effect with conditional randomization, do the following two steps</p>
<ol class="simple">
<li><p>First, compute the average causal effect in each of these subsets or strata of the population</p></li>
<li><p>Second, compute the average causal effect by combining the individual effects from step 1</p>
<ul class="simple">
<li><p>Using <mark>standardization</mark> or <mark>inverse probability weighting</mark> (wich are mathmatically equivalent)</p></li>
</ul>
</li>
</ol>
</li>
</ul>
</section>
<section id="standardization">
<h3>2.3 Standardization<a class="headerlink" href="#standardization" title="Permalink to this headline">#</a></h3>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>Weighted average of the treatment effects from subgroups; weight is defined by the sample size of the subgorup</p>
</aside>
<ul>
<li><p>More formally, in <em>standardization</em>, the marginal counterfactual risk <span class="math notranslate nohighlight">\(Pr[Y^a=1]\)</span> is the weighted average of the stratum-specific risks <span class="math notranslate nohighlight">\(Pr[Y^a=1|L=0]\)</span> and <span class="math notranslate nohighlight">\(Pr[Y^a=1|L=1]\)</span> with weights equal to the proportion of individuals in the population with <span class="math notranslate nohighlight">\(L=0\)</span> and <span class="math notranslate nohighlight">\(L=1\)</span>, respectively.</p></li>
<li><p>Derivation of counterfactual risk by standardization</p>
<div class="math notranslate nohighlight">
\[
  Pr(Y^a=1) = \sum_l Pr(Y^a=1|L=l)Pr(L=l)
  \]</div>
<p>under conditoinal exchangeability, we can replace the (unobserved) counterfactual riks with the obsered risk:</p>
<div class="math notranslate nohighlight">
\[
  Pr(Y^a=1|L=l) = Pr(Y=1|A=a, L=l)
  \]</div>
<ul class="simple">
<li><p>When, as here, a counterfactual quantity can be expressed as function of the distribution (i.e., probabilities) of the observed data, we say that the counterfactual quantity is identified or identifiable; otherwise, we say it is unidentified or not identifiable.</p></li>
</ul>
</li>
</ul>
</section>
<section id="inverse-probability-weighting-ipw">
<h3>2.4 Inverse probability weighting (IPW)<a class="headerlink" href="#inverse-probability-weighting-ipw" title="Permalink to this headline">#</a></h3>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>The idea is that assuming all the patients in one subgroup receive treatment/control, and the outcome probability follows the obseved one from one of the arms (under conditional exchangeability assumption), how would the outcome look like (pseudo counterfactual).</p>
<p>Since the sample size in either arm is increased by N/ni folds (inverse of the proportion of patients in one of the arms), where N is the total sample size in this subgroup and ni is the sample size in one of the arms, the outcome from each invidividual should also be also upscaled by this ratio (N/n).</p>
</aside>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>IP weighted estimators were proposedbyHorvitzandThompson (1952) for surveys in which subjects are sampled with unequal probabilities</p>
</aside>
<ul>
<li><p>Under conditional exchangeability <span class="math notranslate nohighlight">\(Y^a \perp\!\!\!\perp A|L\)</span> in the original population, the treated and the untreated are (unconditionally) exchangeable in the pseudo-population because the <span class="math notranslate nohighlight">\(L\)</span> is independent of <span class="math notranslate nohighlight">\(A\)</span>.</p>
<ul class="simple">
<li><p>That is, the associational risk ratio in the pseudo-population is equal to the causal risk ratio in both the pseudo-population and the original population.</p></li>
</ul>
<p><img alt="sJRh3P_2022_06_22" src="https://cdn.jsdelivr.net/gh/askming/upic&#64;master/uPic/sJRh3P_2022_06_22.png" /></p>
</li>
<li><p>Informally, the pseudo-population is created by weighting each individual in the population by the inverse of the conditional probability of receiving the treatment level, IP weight:</p>
<div class="math notranslate nohighlight">
\[
  W^A = 1/f(A|L)
  \]</div>
</li>
<li><p>Standardization and IP weighting are mathematically equivalent</p>
<ul class="simple">
<li><p>In fact, both standardization and IP weighting can be viewed as procedures to build a new tree in which all individuals receive treatment <span class="math notranslate nohighlight">\(a\)</span>. Each method uses a different set of the probabilities to build the counterfactual tree: IP weighting uses the conditional probability of treatment <span class="math notranslate nohighlight">\(A\)</span> given the covariate <span class="math notranslate nohighlight">\(L\)</span> (as shown in Figure above), standardization uses the probability of the covariate <span class="math notranslate nohighlight">\(L\)</span> and the conditional probability of outcome <span class="math notranslate nohighlight">\(Y\)</span> given <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(L\)</span>.</p></li>
</ul>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>In a slight abuse of language we sometimes say that these methods <em>control</em> for <span class="math notranslate nohighlight">\(L\)</span>, but this “analytic control” is quite different from the “physical control” in a randomized experiment.
Standardization and IP weighting can be generalized to conditionally randomized studies with continuous outcomes</p>
</aside>
<ul class="simple">
<li><p>Because both standardization and IP weighting simulate what would have been observed if the variable (or variables in the vector) <span class="math notranslate nohighlight">\(L\)</span> had not been used to decide the probability of treatment, we often say that these methods <em><strong>adjust</strong></em> for <span class="math notranslate nohighlight">\(L\)</span>.</p></li>
</ul>
</li>
<li><p>Proof of the equivalence of IP weighting and standardization</p>
<ul>
<li><p>Standardized mean for treatment level <span class="math notranslate nohighlight">\(a\)</span> is defined as</p>
<div class="math notranslate nohighlight">
\[
    \sum_l E\left[Y|A=a, L=l\right]Pr(L=l)
    \]</div>
</li>
<li><p>IP weighted mean for the treatment level <span class="math notranslate nohighlight">\(a\)</span> is defined as</p>
<div class="math notranslate nohighlight">
\[
    E\left[\frac{I(A=a)Y}{f(A|L)}\right]
    \]</div>
<ul class="simple">
<li><p>proof of equivalence</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}
    E\left[\frac{I(A=a)Y}{f(A|L)}\right]  \\ 
    = \sum_l\frac{1}{f(a|l)}\{E\left[Y|A=a, L=l\right]f(a|l)Pr(L=l)\} \\
    =\sum_l E\left[Y|A=a, L=l\right]
    \end{split}\]</div>
</li>
</ul>
</li>
<li><p>It can be shown that both estimates of mean are euqal to the counterfactual mean <span class="math notranslate nohighlight">\(E[Y^a]\)</span> under the conditional exchangeability assumption, that is</p>
<div class="math notranslate nohighlight">
\[
  E[Y^a] = \sum_l E\left[Y|A=a, L=l\right] = E\left[\frac{I(A=a)Y}{f(A|L)}\right], \text{ under } Y\perp\!\!\!\perp A|L
  \]</div>
<ul class="simple">
<li><p>When treatment is continuous, which is an unlikely design choice in conditionally randomized experiments, <span class="math notranslate nohighlight">\(E[I(A=a)Y/f(A|L)]\)</span> is no longer equal to <span class="math notranslate nohighlight">\(\sum_l E\left[Y|A=a, L=l\right]\)</span> and thus is biased for <span class="math notranslate nohighlight">\(E[Y^a]\)</span> even under exchangeability</p></li>
</ul>
</li>
</ul>
<hr>
</section>
</section>
<section id="chapter-4-effect-modification">
<h2>Chapter 4 Effect Modification<a class="headerlink" href="#chapter-4-effect-modification" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Key ideas in this chapter</p>
<ul>
<li><p>Definition of effect modification (EM); why we care about it?</p></li>
<li><p>How to identify/quantify effect modification? Hint: use stratification</p></li>
<li><p>Stratification and matching are both adjustment methods; what is the definition of adjustment? Any other adjustment methods?</p></li>
</ul>
</li>
</ul>
<section id="definitionof-effect-modification-what-and-why-effect-modification">
<h3>4.1 &amp; 4.3 Definitionof effect modification (what) and why effect modification<a class="headerlink" href="#definitionof-effect-modification-what-and-why-effect-modification" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>Definition of effect modification</p>
<ul class="simple">
<li><p>We say that <span class="math notranslate nohighlight">\(V\)</span> is a modifier of the effect of <span class="math notranslate nohighlight">\(A\)</span> on <span class="math notranslate nohighlight">\(Y\)</span> when the average causal effect of <span class="math notranslate nohighlight">\(A\)</span> on <span class="math notranslate nohighlight">\(Y\)</span> varies across levels of <span class="math notranslate nohighlight">\(V\)</span></p>
<ul>
<li><p>The existence of effect modification depends on the effect measure being used (e.g., risk difference, risk ratio), so it is more accurate to use the term <em>effect-measure modification</em>, to emphasize the dependence of the concept on the choice of effect measure</p></li>
</ul>
</li>
<li><p>Since the average causal effect can be measured using different effect measures (e.g., risk difference, risk ratio), the presence of effect modification depends on the effect measure being used.</p></li>
<li><p>Here only consider variables <span class="math notranslate nohighlight">\(V\)</span> that are not affected by treatment <span class="math notranslate nohighlight">\(A\)</span></p></li>
</ul>
</li>
<li><p>Types of effect modification</p>
<ul class="simple">
<li><p><em>qualitative effect modification</em>: when the average causal effects in the subsets are in the opposite direction.</p>
<ul>
<li><p>In the presence of qualitative effect modification, additive effect modification implies multiplicative effect modification, and vice versa. In the absence of qualitative effect modification, however, one can find effect modification on one scale (e.g., multiplicative) but not on the other (e.g., additive).</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Why we care about effect modification</p>
<ol class="simple">
<li><p>If a factor <span class="math notranslate nohighlight">\(V\)</span> modifies the effect of treatment <span class="math notranslate nohighlight">\(A\)</span> on the outcome <span class="math notranslate nohighlight">\(Y\)</span> then the average causal effect will differ between populations with different prevalence of <span class="math notranslate nohighlight">\(V\)</span></p>
<ul class="simple">
<li><p>There is generally no such athingas “<em>the average</em> causal effect of treatment <span class="math notranslate nohighlight">\(A\)</span> on outcome <span class="math notranslate nohighlight">\(Y\)</span> (period)”, but “the average causal effect of treatment <span class="math notranslate nohighlight">\(A\)</span> on outcome <span class="math notranslate nohighlight">\(Y\)</span> in a population with a particular mix of causal effect modifiers.”</p></li>
</ul>
</li>
<li><p>Evaluating the presence of effect modification is helpful to identify the groups of individuals that would benefit most from an intervention.</p>
<ul class="simple">
<li><p>if there is a nonzero causal effect in at least one stratum of <span class="math notranslate nohighlight">\(V\)</span> and the counterfactual risk <span class="math notranslate nohighlight">\(Pr[Y^{a=0} =1|V = v]\)</span> varies with <span class="math notranslate nohighlight">\(v\)</span>,then effect modification is guaranteed on either the additive or the multiplicative scale.</p></li>
<li><p>Additive, but not multiplicative, effect modification is the appropriate scale to identify the groups that will benefit most from intervention.</p></li>
</ul>
</li>
</ol>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>The terms “effect modification” and “interaction” are sometimes used as synonymous in the scientific literature. “Interaction” as a causal concept that is related to, but different from, effect modification (Chapter 5).</p>
</aside>
<ol class="simple">
<li><p>The identification of effect modification may help understand the biological, social, or other mechanisms leading to the outcome.</p></li>
</ol>
</li>
<li><p><em>Transportability</em> of causal inference: The extrapolation of causal effects computed in one population to a second population</p>
<ul class="simple">
<li><p>Conditional causal effects in the strata defined by the effect modifiers may be more transportable than the causal effect in the entire population, but there is no guarantee that the conditional effect measures in one population equal the conditional effect measures in another population. Due to different reasons:</p>
<ul>
<li><p>unmeasured, or unknown, causal effect modifiers whose conditional distributions vary between the two populations</p></li>
<li><p>when transportability may be justified from one to antoher population?</p>
<ul>
<li><p>Effection modification: similar distribution of effect modifiers</p></li>
<li><p>Versions fo treatment: requires similar distr. of versions fo treatment</p></li>
<li><p>Interference: treating one individual many affect the outcome of others in the populaiton</p></li>
</ul>
</li>
</ul>
</li>
<li><p>transportability of causal effects is an unverifiable assumption that relies heavily on subject-matter knowledge. It is a more difficult problem than the identification of causal effects in a single population</p></li>
</ul>
</li>
</ul>
</section>
<section id="how-to-quantify-effect-modification">
<h3>4.2, 4.4, &amp; 4.5 How to quantify effect modification<a class="headerlink" href="#how-to-quantify-effect-modification" title="Permalink to this headline">#</a></h3>
<section id="stratification">
<h4>Stratification<a class="headerlink" href="#stratification" title="Permalink to this headline">#</a></h4>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>if treatment assignment was random and unconditional, exchangeability is expected in every subset of the population.</p>
</aside>
<ul class="simple">
<li><p>To identify effect modification by <span class="math notranslate nohighlight">\(V\)</span> in an ideal experiment with unconditional randomization, one just needs to conduct a stratified analysis, that is, to compute the association measure in each level of the variable <span class="math notranslate nohighlight">\(V\)</span>.</p></li>
</ul>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>Step 2 can be ignored when <span class="math notranslate nohighlight">\(V\)</span> is equal to the variables <span class="math notranslate nohighlight">\(L\)</span> that are needed for conditional exchangeability</p>
</aside>
<ul class="simple">
<li><p>The procedure to compute the conditional risks <span class="math notranslate nohighlight">\(Pr[Y^{a=1}=1|V = v]\)</span> and <span class="math notranslate nohighlight">\(Pr[Y^{a=0}=1|V = v]\)</span> in each stratum <span class="math notranslate nohighlight">\(v\)</span> has two stages: 1) stratification by <span class="math notranslate nohighlight">\(V\)</span> , and 2) standardization by <span class="math notranslate nohighlight">\(L\)</span> (or, equivalently, IP weighting with weights depending on <span class="math notranslate nohighlight">\(L\)</span>).</p></li>
</ul>
</section>
<section id="adjustment-via-stratification">
<h4>Adjustment via stratification<a class="headerlink" href="#adjustment-via-stratification" title="Permalink to this headline">#</a></h4>
<ul>
<li><p>In practice stratification is often used as an alternative to standardization (and IP weighting) to adjust for <span class="math notranslate nohighlight">\(L\)</span>. In fact, the use of stratification as a method to adjust for <span class="math notranslate nohighlight">\(L\)</span> is so widespread that many investigators consider the terms “stratification” and “adjustment” as synonymous.</p>
<ul class="simple">
<li><p>Stratification provides conditional effect measures within each of the stratum</p></li>
</ul>
</li>
<li><p>Unlike standardization and IP weighting, adjustment via stratification requires computing the effect measures in subsets of the population defined by a combination of all variables <span class="math notranslate nohighlight">\(L\)</span> that are required for conditional exchangeability.</p>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>In contrast, stratification by <span class="math notranslate nohighlight">\(V\)</span> followed by IP weighting or standardization to adjust for <span class="math notranslate nohighlight">\(L\)</span> allows one to deal with exchangeability and effect modification separately, as described above.</p>
</aside>
<ul class="simple">
<li><p>That is, the use of stratification forces one to evaluate effect modification by all variables <span class="math notranslate nohighlight">\(L\)</span> required to achieve conditional exchangeability, regardless of whether one is interested in such effect modification.</p></li>
</ul>
</li>
<li><p>Other problems associated with the use of stratification are <em>noncollapsibility</em> of certain effect measures like the odds ratio (Fine Point 4.3) and inappropriate adjustment that leads to bias when, in the case for <strong>time-varying treatments</strong>, it is necessary to adjust for time-varying variables <span class="math notranslate nohighlight">\(L\)</span> that are affected by prior treatment (see Part III of the book).</p></li>
</ul>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>Stratification requires positivity in addition to exchangeability: the causal effectcannotbecomputed in subsets <span class="math notranslate nohighlight">\(L=l\)</span> in which there are only treated, or untreated, individuals.</p>
</aside>
<ul class="simple">
<li><p><em>Ristriction</em>: compute causal effect in only some of the strata defined by the variables <span class="math notranslate nohighlight">\(L\)</span> and no stratum-specific measures for some other strata</p></li>
</ul>
</section>
<section id="adjustment-via-matching">
<h4>Adjustment via matching<a class="headerlink" href="#adjustment-via-matching" title="Permalink to this headline">#</a></h4>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>Pay attention to the difference in matching applied to case-control studies:</p>
<p>Even if the matching factors suffice for conditional exchangeability, matching in cases and controls does not achieve unconditional exchangeability of the treated and the untreated in the matched population. Adjustment for the matching factors via stratification is required to estimate conditional (stratumspecific) effect measures.</p>
</aside>
<ul class="simple">
<li><p>The goal of matching is to construct a subset of the population in which the variables <span class="math notranslate nohighlight">\(L\)</span> have the same distribution in both the treated and the untreated.</p>
<ul>
<li><p>Under the assumption of conditional exchangeability given <span class="math notranslate nohighlight">\(L\)</span>, the result of this procedure is (unconditional) exchangeability of the treated and the untreated in the matched population.</p></li>
<li><p>The chosen group defines the subpopulation on which the causal effect is being computed (e.g. effect in the treated/untreated)</p></li>
</ul>
</li>
<li><p>Because the matched population is a subset of the original study population, the distribution of causal effect modifiers in the matched study population will generally differ from that in the original, unmatched study population</p></li>
</ul>
</section>
<section id="fine-and-tech-points-4-1-causal-effect-in-the-treated-untreated">
<h4>Fine and Tech Points 4.1 Causal effect in the treated/untreated<a class="headerlink" href="#fine-and-tech-points-4-1-causal-effect-in-the-treated-untreated" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p>Consider a particular and special subset of the population, the treated (<span class="math notranslate nohighlight">\(A=1\)</span>), the average causal effect in the treated is expressed as</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
Pr(Y^{a=1} =1|A=1) - Pr(Y^{a=0} = 1 | A=1)
\]</div>
<ul>
<li><p>The causal risk ratio in the treated is also called the <strong>standardized morbidity ratio (SMR)</strong></p>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>However, even though one could say that there is effect modification by the pretreatment variable <span class="math notranslate nohighlight">\(V\)</span> even if <span class="math notranslate nohighlight">\(V\)</span> is only a surrogate (e.g., nationality) for the causal effect modifiers, one would not say that there is modification of the effect <span class="math notranslate nohighlight">\(A\)</span> by treatment <span class="math notranslate nohighlight">\(A\)</span> because it sounds confusing.</p>
</aside>
</li>
<li><p>The average effect in the treated will differ from the average effect in the population if the distribution of individual causal effects varies between the treated and the untreated.</p></li>
</ul>
<p><img alt="kyDpUe_2022_06_20" src="https://cdn.jsdelivr.net/gh/askming/upic&#64;master/uPic/kyDpUe_2022_06_20.png" /></p>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>In other words, it is irrelevant whether the risk in the untreated, had they been treated, equals the risk in those who were actually treated.</p>
</aside>
<ul>
<li><p>Computing the average causal effect in the treated only requires partial exchangeability <span class="math notranslate nohighlight">\(Y^{A=0} \perp\!\!\!\perp A|L\)</span>.</p>
<ul class="simple">
<li><p>similarly, the average causal effect in the untreated is computed under the partial exchangeability condition <span class="math notranslate nohighlight">\(Y^{a=1} \perp\!\!\!\perp A|L\)</span></p></li>
</ul>
</li>
<li><p>To compute the counterfactual mean <span class="math notranslate nohighlight">\(E(Y^{a}|A=a')\)</span>:</p>
<ul>
<li><p>Standardization</p>
<div class="math notranslate nohighlight">
\[
    E(Y^{a}|A=a') = \sum_l E(Y|A=a, L=l)Pr(L=l|A=a')
    \]</div>
</li>
<li><p>IP weighting</p>
<div class="math notranslate nohighlight">
\[
    E(Y^{a}|A=a') = \frac{E\left[\frac{I(A=a)Y}{f(A|L)Pr(A=a'|L)}\right]}{E\left[\frac{I(A=a)}{f(A|L)Pr(A=a'|L)}\right]}
    \]</div>
</li>
</ul>
</li>
</ul>
</section>
</section>
<section id="summary">
<h3>4.6 Summary<a class="headerlink" href="#summary" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>Stratified analysis is needed to inspect the existence of effect modification from certain variable(s) <span class="math notranslate nohighlight">\(L\)</span> on the treatment <span class="math notranslate nohighlight">\(A\)</span></p></li>
<li><p>When doing standardization and IP weighting, stratefication is used as a technique to estimate the average/weighted outcome in each of the treatment arms to construct the final estimate of the treatment effect</p>
<div class="math notranslate nohighlight">
\[\begin{split}
  \begin{array}{ll}
  Pr(Y^{a=1}=1) - Pr(Y^{a=0}=1)
  &amp;= \sum_lPr(Y^{a=1}=1|L=l) - \sum_lPr(Y^{a=0}=1|L=l) \\
  &amp;= \sum_l Pr(Y=1|A=1, L=l) - \sum_l Pr(Y=1|A=0, L=l)
  \end{array}
  \end{split}\]</div>
</li>
<li><p>In contrast, pooling stratum-specific effect (e.g., Woolf, Mantel-Haenszel, maximum likelihood) needs to compute the stratum-specific effect first followed by combining the individual effects using some kind of weighted average with weights chosen to reduce the variability of the pooled estimate.</p>
<ul class="simple">
<li><p>The main goal of pooling is to obtain a narrower confidence interval around the common stratum-specificeffect measure, but <strong>the pooled effect measure is still a conditional effect measure</strong>.</p></li>
</ul>
</li>
<li><p>These four approaches can be divided into two groups according to the type of effect they estimate: standardization and IP weighting can be used to compute either marginal or conditional effects, stratification/restriction and matching can only be used to compute conditional effects in certain subsets of the population.</p>
<ul class="simple">
<li><p>The idea is that, if the effect measure is the same in all strata (i.e., if there is no effect-measure modification), then the pooled effect measure will be a more precise estimate of the common effect measure.</p></li>
<li><p>In the absence of effect modification, the effect measures (risk ratio or risk difference) computed via standardization, IP weighting, stratification/restriction, and matching will be equal.</p></li>
</ul>
</li>
<li><p>Investigators conducting observational studies need to explicitly define the causal effect of interest and the subset of the population in which the effect is being computed. Otherwise, misunderstandings might easily arise when effect measures obtained via different methods are different.</p></li>
</ul>
<hr>
</section>
</section>
<section id="chapter-5-interaction">
<h2>Chapter 5 Interaction<a class="headerlink" href="#chapter-5-interaction" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Key ideas/points in this chapter</p>
<ul>
<li><p>What is an interaction?</p></li>
<li><p>What is the difference between interaction and effect modification?</p></li>
<li><p>How is an interaction caused? How to identify it?</p></li>
<li><p>What is sufficient causes and sufficient cause interaction? How is sufficient component causes related with counterfactual response types? (optional)</p></li>
</ul>
</li>
</ul>
<section id="interaction-requires-a-joint-intervention">
<h3>5.1 Interaction requires a joint intervention<a class="headerlink" href="#interaction-requires-a-joint-intervention" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><em>Joint interventions</em>: interventions on two or more treatments</p></li>
<li><p>Definition of interaction:</p>
<ul>
<li><p>There is interaction between two treatments <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(E\)</span> if the causal effect of <span class="math notranslate nohighlight">\(A\)</span> on <span class="math notranslate nohighlight">\(Y\)</span> after a joint intervention that set <span class="math notranslate nohighlight">\(E\)</span> to 1 differs from the causal effect of <span class="math notranslate nohighlight">\(A\)</span> on <span class="math notranslate nohighlight">\(Y\)</span> after a joint intervention that set <span class="math notranslate nohighlight">\(E\)</span> to 0.</p></li>
<li><p>Depending on the choice of effect measure, the interaction can be on the additive scale or multiplicative scale</p></li>
</ul>
</li>
<li><p>Differentiating interaction and effect modification</p>
<ul>
<li><p>Under interaction, there are two treatments, and these two treatments have euqal status in the definition of interaction. That is the counterfactual can be defined on either interventions to define the existence of interaction</p></li>
<li><p>In contrast, the definition of effect modification involves the counterfactual outcomes only on one of the two variables, i.e. the treatment variable of interest (say, <span class="math notranslate nohighlight">\(Y^a\)</span>) but not the counterfactual outcomes <span class="math notranslate nohighlight">\(Y^{a, v}\)</span>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="identifying-interaction">
<h3>5.2 Identifying interaction<a class="headerlink" href="#identifying-interaction" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>Identifying interaction requires exchangeability, positivity, and consistency for both treatments.</p>
<ul class="simple">
<li><p>When both treatments are randomly assigned, then the concepts of interaction and effect modification conincide.</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
  Pr(Y^{a=1, e=1} = 1) = Pr(Y^{a=1}=1|E=1)
  \]</div>
<p>and the techniques used to identify effect modification can be used to identify interaction.</p>
<ul class="simple">
<li><p>When one of the treatment, say <span class="math notranslate nohighlight">\(E\)</span>, is not randomly assigned, four marginal risks <span class="math notranslate nohighlight">\(Pr(Y^{a, e} = 1)\)</span> need to be computed under the usual identifying assumtpions, by standardiztion or IP weighting conditional on the measured covariates.</p>
<ul>
<li><p>Rather than viewing <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(E\)</span> as two distinct treatments with two possible levels (1 or 0) each, one can view <span class="math notranslate nohighlight">\(AE\)</span> as a combined treatment with four possible levels (11, 01, 10, 00) and interaction can be evaluated when exchangeability, positivity,and consistency are all satisfied for the joint treatment <span class="math notranslate nohighlight">\((A, E)\)</span>.</p>
<ul>
<li><p>However, this condistion is not necessary when the two tretments occur at different times (see Part III of the book)</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>When conditional exchangeability can only be assumed for treatment <span class="math notranslate nohighlight">\(A\)</span> but <span class="math notranslate nohighlight">\(E\)</span>, one cannot generally assess the presence of interaction between <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(E\)</span>, but can still assess the presence of the effect modification by <span class="math notranslate nohighlight">\(E\)</span>.</p>
<ul class="simple">
<li><p>Thus, there can be modification of the effect of <span class="math notranslate nohighlight">\(A\)</span> by another variable without interaction between <span class="math notranslate nohighlight">\(A\)</span> and that variable.</p></li>
</ul>
</li>
</ul>
</section>
<section id="counterfactual-response-types-and-interaction">
<h3>5.3 Counterfactual response types and interaction<a class="headerlink" href="#counterfactual-response-types-and-interaction" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>Each combination of counterfactual responses is often referred to as are sponse pattern or a <em>response type</em>.</p>
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/Nvo64V_2022_07_27.png" width='40%'>
<ul>
<li><p>When considering two dichotomous treatments <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(E\)</span>,thereare16 possible response types because each individual has four counterfactual outcomes</p>
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/jlHwmV_2022_07_27.png" width = "40%">
<ul class="simple">
<li><p>if all individuals in the population have response types 1, 4, 6, 11, 13 and 16 then there will be no interaction between <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(E\)</span> on the additive scale.</p></li>
<li><p>The presence of <strong>additive</strong> interaction between <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(E\)</span> implies that, for some individuals in the population, the value of their two counterfactual outcomes under <span class="math notranslate nohighlight">\(A = a\)</span> cannot be determined without knowledge of the value of <span class="math notranslate nohighlight">\(E\)</span>, and vice versa.</p>
<ul>
<li><p>types 8, 12, 14, and 15</p></li>
<li><p>types 7 and 10</p></li>
<li><p>types 2, 3, 5, and 9</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sufficient-causes-5-5-sufficient-causes-interaction-5-6">
<h3>5.4 Sufficient causes &amp; 5.5 Sufficient causes interaction &amp; 5.6<a class="headerlink" href="#sufficient-causes-5-5-sufficient-causes-interaction-5-6" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>We refer to the smallest set of background factors that, together with <span class="math notranslate nohighlight">\(A =1\)</span> are sufficient to inevitably produce the outcome as <span class="math notranslate nohighlight">\(U_1\)</span>. The simultaneous presence of treatment <span class="math notranslate nohighlight">\((A=1)\)</span> and <span class="math notranslate nohighlight">\(U_1=1\)</span> is a minimal <em>sufficient cause</em> of the outcome <span class="math notranslate nohighlight">\(Y\)</span>.</p>
<ul class="simple">
<li><p>By definition of background factors, the dichotomous variables <span class="math notranslate nohighlight">\(U\)</span> cannot be intervened on, and cannot be affected by treatment <span class="math notranslate nohighlight">\(A\)</span>.</p></li>
<li><p>The term <em>sufficient-component causes</em> is often used to refer to the sufficient causes and their components (e.g. <span class="math notranslate nohighlight">\(A\)</span> or <span class="math notranslate nohighlight">\(U\)</span> or both).</p></li>
</ul>
</li>
<li><p>The definition of interaction within the counterfactual framework does not require any knowledge about those mechanisms nor even that the treatments work together (see Fine Point 5.3).</p>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>another concept of interaction is not based on counterfactual contrasts but rather on sufficient-component causes, and thus we refer to it as interaction within the <em>sufficient-component-cause</em> framework or, for brevity, sufficient cause interaction.</p>
</aside>
</li>
<li><p>A sufficient cause interaction between <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(E\)</span> exists in the population if <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(E\)</span> occur together in a sufficient cause.</p>
<ul class="simple">
<li><p><em>Synergistic</em>: when <span class="math notranslate nohighlight">\(A=1\)</span> and <span class="math notranslate nohighlight">\(E=1\)</span> are present in the same sufficient cause</p></li>
<li><p><em>Antagonistic</em>: when <span class="math notranslate nohighlight">\(A=1\)</span> and <span class="math notranslate nohighlight">\(E=0\)</span> (or <span class="math notranslate nohighlight">\(A=0\)</span> and <span class="math notranslate nohighlight">\(E=1\)</span>) are present in the same sufficient cause</p></li>
</ul>
</li>
<li><p>The correspondence between conterfactual response types and the sufficient component causes</p>
<ul>
<li><p>Example with a dichtomous treatment and outcome
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/iRs0aP_2022_07_29.png" width="80%"></p></li>
<li><p>A particular combination of component causes corresponds to one and only one counterfactual type.</p></li>
<li><p>However, a particular response type may correspond to several combinations of component causes</p></li>
<li><p>There will be exchangeability if the proportions of “doomed” + “hurt” (<span class="math notranslate nohighlight">\(U_0=1\)</span> or <span class="math notranslate nohighlight">\(U_1=1\)</span>) and of “doomed” + “helped” (<span class="math notranslate nohighlight">\(U_0=1\)</span> or <span class="math notranslate nohighlight">\(U_1=2\)</span>) are equal in the treated and the untreated. That is, exchangeability for a dichotomous treatment and out come can be expressed in terms of sufficient-component causes as</p>
<div class="math notranslate nohighlight">
\[
    Pr(U_0=1 \text{ or } U_1=1|A=1) = Pr(U_0=1 \text{ or } U_1=1|A=0), \text{ and}
    \]</div>
<div class="math notranslate nohighlight">
\[
    Pr(U_0=1 \text{ or } U_2=1|A=1) = Pr(U_0=1 \text{ or } U_2=1|A=0)
    \]</div>
</li>
</ul>
</li>
<li><p>In epidemiologic discussions, sufficient cause interaction is commonly referred to as <em>biologic interaction</em> (Rothman et al, 1980).</p></li>
<li><p>Counterfactuals or sufficient-component causes</p>
<ul class="simple">
<li><p>The sufficient component cause model considers sets of actions, events, or states of nature which together inevitably bring about the outcome under consideration.</p>
<ul>
<li><p>It addresses the question, “Given a particular effect, what are the various events which might have been its cause?”</p></li>
</ul>
</li>
<li><p>The potential outcomes or counterfactual model focuses on one particular cause or intervention and gives an account of the various effects of that cause.</p>
<ul>
<li><p>the potential outcomes framework addresses the question, “What would have occurred if a particular factor were intervened upon and thus set to a different level than it in fact was?”</p></li>
</ul>
</li>
<li><p>The counterfactual approach addresses the question “what happens?” The sufficient-component-cause approach addresses the question “how does it happen?”</p></li>
<li><p>Though the sufficient-component-cause framework is useful from a pedagogic standpoint, its relevance to actual data analysis is yet to be determined.</p></li>
<li><p>Suffcient-component-cause framework’s conclusions depend on the coding on the outcome, and is by definition limited to dichotomous treatments and outcomes (or to variables that can be recoded as dichotomous variables).</p></li>
<li><p>Some apparently alternative frameworks–causal diagrams, decision theory–are essentially equivalent to the counterfactual framework</p></li>
</ul>
</li>
</ul>
<hr>
</section>
</section>
<section id="chapter-6-graphical-representation-of-causal-effects">
<h2>Chapter 6 Graphical representation of causal effects<a class="headerlink" href="#chapter-6-graphical-representation-of-causal-effects" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Key ideas/points in this chapter</p>
<ul>
<li><p>What is a DAG (Direct Acyclic Graph), what is it used for? (6.1)</p></li>
<li><p>DAG representation of the key causal inference concepts: marginal/conditional independence, positivity, and consistency (Section 6.2 to 6.4)</p></li>
<li><p>D-seperation (6.4)</p></li>
<li><p>Faithfullness (6.4)</p></li>
<li><p>Type of biases (6.5)</p></li>
<li><p>DAG representation of effect modification (6.6)</p></li>
</ul>
</li>
</ul>
<section id="causal-diagrams">
<h3>6.1 Causal diagrams<a class="headerlink" href="#causal-diagrams" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>Causal diagrams like the one below are known as directed acyclic graphs, which is commonly abbreviated as DAGs.</p>
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/tpZKOa_2022_08_08.png" width="40%">
<ul class="simple">
<li><p>The presence of an arrow pointing from a particular variable <span class="math notranslate nohighlight">\(V\)</span> to another variable <span class="math notranslate nohighlight">\(W\)</span> indicates that we know there is a direct causal effect (i.e., an effect not mediated through any other variables on the graph) for at least one individual.</p></li>
<li><p>In DAG, the variable <span class="math notranslate nohighlight">\(V_m\)</span> is a descendant of <span class="math notranslate nohighlight">\(V_j\)</span> (and <span class="math notranslate nohighlight">\(V_j\)</span> is an ancestor of <span class="math notranslate nohighlight">\(V_m\)</span>) if there is a sequence of nodes connected by edges between <span class="math notranslate nohighlight">\(V_j\)</span> and <span class="math notranslate nohighlight">\(V_m\)</span> such that, following the direction indicated by the arrows, one can reach <span class="math notranslate nohighlight">\(V_m\)</span> by starting at <span class="math notranslate nohighlight">\(V_j\)</span>.</p></li>
<li><p>A <strong>causal DAG</strong> is a DAG in which</p>
<ol class="simple">
<li><p>the lack of an arrow from node <span class="math notranslate nohighlight">\(V_j\)</span> to <span class="math notranslate nohighlight">\(V_m\)</span> (i.e., <span class="math notranslate nohighlight">\(V_j\)</span> is not a parent of <span class="math notranslate nohighlight">\(V_m\)</span>)can be interpreted as the absence of a direct causal effect of <span class="math notranslate nohighlight">\(V_j\)</span> on <span class="math notranslate nohighlight">\(V_m\)</span> relative to the other variables on the graph,</p></li>
<li><p>all common causes, even if unmeasured, of any pair of variables on the graph are themselves on the graph, and</p></li>
<li><p>any variable is a cause of its descendants.</p></li>
</ol>
</li>
</ul>
</li>
<li><p>A defining property of causal DAGs is that, conditional on its direct causes, any variable on the DAG is independent of any other variable for which it is not a cause.</p>
<ul class="simple">
<li><p>This assumption, referred to as the <strong>causal Markov assumption</strong>, implies that in a causal DAG the common causes of any pair of variables in the graph must be also in the graph.</p></li>
</ul>
</li>
<li><p>Conventional causal diagrams do not include the underlying counterfactual variables on the graph. Therefore the link between graphs and counterfactuals has traditionally remained hidden.</p>
<ul class="simple">
<li><p>The <strong>Single World Intervention Graph (SWIG)</strong>–seamlessly unifies the counterfactual and graphical approaches to causal inference by explicitly including the counterfactual variables on the graph.</p></li>
</ul>
</li>
</ul>
</section>
<section id="causal-diagrams-and-marginal-independence-conditional-independence-positivity-and-consistency">
<h3>6.2-6.4 Causal diagrams and marginal independence, conditional independence, positivity and consistency<a class="headerlink" href="#causal-diagrams-and-marginal-independence-conditional-independence-positivity-and-consistency" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>Two variables are (marginally) associated if one causes the other, or if they share common causes. Otherwise they will be <strong>(marginally) independent</strong> (<span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(L\)</span> in Figure 6.4 below).</p>
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/GL4w71_2022_08_08.png" width = "40%">
<ul class="simple">
<li><p>The common effect <span class="math notranslate nohighlight">\(L\)</span> is referred to as a <em>collider</em> on the path <span class="math notranslate nohighlight">\(A \rightarrow L \leftarrow Y\)</span> because two arrowheads collide on this node.</p></li>
</ul>
</li>
<li><p>Association, unlike causation, is a symmetric relationship between two variables; thus, when present, association flows between two variables regardless of the direction of the causal arrows.</p>
<ul class="simple">
<li><p>In Figure 6.3 below, <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(Y\)</span> are associated because there is a flow of association from <span class="math notranslate nohighlight">\(A\)</span> to <span class="math notranslate nohighlight">\(Y\)</span> (or, equivalently, from <span class="math notranslate nohighlight">\(Y\)</span> to <span class="math notranslate nohighlight">\(A\)</span>) through the common cause <span class="math notranslate nohighlight">\(L\)</span>.
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/BPcmvn_2022_08_08.png" width="40%"></p></li>
</ul>
</li>
<li><p>When conditional independence is established</p>
<ul>
<li><p>Effect of <span class="math notranslate nohighlight">\(A\)</span> on the outcome <span class="math notranslate nohighlight">\(Y\)</span> is only through a mediator <span class="math notranslate nohighlight">\(B\)</span>, and the analysis is conditonal on <span class="math notranslate nohighlight">\(B\)</span>: <span class="math notranslate nohighlight">\(A\perp\!\!\!\perp Y|B\)</span></p>
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/thuius_2022_08_09.png" width="40%">
</li>
<li><p>Conditioning on the common cause of <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(Y\)</span> (outcome): <span class="math notranslate nohighlight">\(A\perp\!\!\!\perp Y|L\)</span></p>
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/pKmk6i_2022_08_09.png" width="40%">
<ul class="simple">
<li><p>Blocking the flow of association between treatment and outcome through the common cause is the graph-based justification to use stratification as a method to achieve exchangeability.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>When conditional association is introduced</p>
<ul>
<li><p>Conditional on the collider or its consequence, the common causes of the the collider (the outcome) are then associated/not independent any more</p>
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/uAAsRt_2022_08_09.png" width="40%">
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/GzGVfy_2022_08_09.png" width="40%">
<ul class="simple">
<li><p>Causal graphs theory shows that indeed conditioning on a collider like <span class="math notranslate nohighlight">\(L\)</span> opens the path <span class="math notranslate nohighlight">\(A\rightarrow L \leftarrow Y\)</span> ,which was blocked when the collider was not conditioned on.</p></li>
<li><p>Causal graphs theory shows that conditioning on a variable <span class="math notranslate nohighlight">\(C\)</span> affected by a collider <span class="math notranslate nohighlight">\(L\)</span> also opens the path <span class="math notranslate nohighlight">\(A\rightarrow L \leftarrow Y\)</span>. This path is blocked in the absence of conditioning on either the collider <span class="math notranslate nohighlight">\(L\)</span> or its consequence <span class="math notranslate nohighlight">\(C\)</span>.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Three structural reasons why two variables may be associated:</p>
<ul class="simple">
<li><p>one causes the other,</p></li>
<li><p>they share common causes, or</p></li>
<li><p>they share a common effect and the analysis is restricted to certain level of that common effect (or of its descendants).</p></li>
<li><p>There is another possible source of association between two variables that we have not discussed yet: <em>chance or random variability</em>.</p></li>
</ul>
</li>
<li><p>Standardization and IP weighting can also be derived using causal graphs theory, as part of what is sometimes referred to as the <strong>do-calculus</strong>.</p></li>
<li><p>“D-seperation”: to define a path to be either blocked or open</p>
<ol class="simple">
<li><p>If there are no variables being conditioned on, a path is blocked if and only if two arrowheads on the path collide at some variable on the path.</p></li>
<li><p>Any path that contains a non-collider that has been conditioned on is blocked.</p></li>
<li><p>A collider that has been conditioned on does not block a path.</p></li>
<li><p>A collider that has a descendant that has been conditioned on does not block a path.</p></li>
</ol>
<ul class="simple">
<li><p>Two variables are d-separated if all paths between them are blocked (otherwise they are d-connected).</p></li>
<li><p>Two sets of variables are d-separated if each variable in the first set is d-separated from every variable in the second set.</p></li>
<li><p>The relationship between statistical independence and the purely graphical concept of d-separation relies on the causal Markov assumption (Technical Point 6.1):</p>
<ul>
<li><p>In a causal DAG, any variable is independent of its non-descendants conditional on its parents.</p></li>
<li><p>The causal Markov assumption implies that, given any three disjoint sets <span class="math notranslate nohighlight">\(A\)</span>, <span class="math notranslate nohighlight">\(B\)</span>, <span class="math notranslate nohighlight">\(C\)</span> of variables, if <span class="math notranslate nohighlight">\(A\)</span> is d-separated from <span class="math notranslate nohighlight">\(B\)</span> conditional on <span class="math notranslate nohighlight">\(C\)</span>,then <span class="math notranslate nohighlight">\(A\)</span> is statistically independent of <span class="math notranslate nohighlight">\(B\)</span> given <span class="math notranslate nohighlight">\(C\)</span>.</p></li>
<li><p>The assumption that the converse holds, i.e., that <span class="math notranslate nohighlight">\(A\)</span> is d-separated from <span class="math notranslate nohighlight">\(B\)</span> conditional on <span class="math notranslate nohighlight">\(C\)</span> if <span class="math notranslate nohighlight">\(A\)</span> is statistically independent of <span class="math notranslate nohighlight">\(B\)</span> given <span class="math notranslate nohighlight">\(C\)</span>, is a separate assumption–the <strong>faithfulness assumption</strong> described in Fine Point 6.2.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Positivity</p>
<ul class="simple">
<li><p>Positivity is roughly translated into graph language as the condition that the arrows from the nodes <span class="math notranslate nohighlight">\(L\)</span> to the treatment node <span class="math notranslate nohighlight">\(A\)</span> are not deterministic.</p></li>
</ul>
</li>
<li><p>Consistency</p>
<ul class="simple">
<li><p>The first component of consistency–well-defined interventions–means that the arrow from treatment <span class="math notranslate nohighlight">\(A\)</span> to outcome <span class="math notranslate nohighlight">\(L\)</span> corresponds to a possibly hypothetical but relatively unambiguous intervention.</p></li>
</ul>
</li>
<li><p>Positivity is concerned with arrows into the treatment nodes, and well-defined interventions are only concerned with arrows leaving the treatment nodes.</p></li>
<li><p>Faithfullness</p>
<ul>
<li><p>Formally, faithfulness is the assumption that, for three disjoint sets <span class="math notranslate nohighlight">\(A\)</span>, <span class="math notranslate nohighlight">\(B\)</span>, <span class="math notranslate nohighlight">\(C\)</span> on a causal DAG, (where <span class="math notranslate nohighlight">\(C\)</span> may be the empty set), <span class="math notranslate nohighlight">\(A\)</span> independent of <span class="math notranslate nohighlight">\(B\)</span> given <span class="math notranslate nohighlight">\(C\)</span> implies <span class="math notranslate nohighlight">\(A\)</span> is d-separated from <span class="math notranslate nohighlight">\(B\)</span> given <span class="math notranslate nohighlight">\(C\)</span>.</p></li>
<li><p>When the causal diagram makes us expect a non-null association that does not actually exist in the data (e.g. due to effect modification, which is rare ), we say that the joint distribution of the data is not faithful to the causal DAG.</p></li>
<li><p>In some occassions, faithfulness may be violated by design: for example in mathcing</p>
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/OJMhqJ_2022_08_09.png" width="40%">
<ul class="simple">
<li><p>selection <span class="math notranslate nohighlight">\(S\)</span> (1: yes, 0: no) is determined by both <span class="math notranslate nohighlight">\(L\)</span> and <span class="math notranslate nohighlight">\(A\)</span>. The box around <span class="math notranslate nohighlight">\(S\)</span> indicates that the analysis is restricted to those selected into the matched cohort (<span class="math notranslate nohighlight">\(S\)</span> =1)</p></li>
<li><p>there are two open paths between <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(L\)</span> when conditioning on <span class="math notranslate nohighlight">\(S\)</span>: <span class="math notranslate nohighlight">\(L \rightarrow A\)</span> and <span class="math notranslate nohighlight">\(L \rightarrow S \leftarrow A\)</span> thus association between <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(S\)</span> are expected.</p></li>
<li><p>However, matching creates an association via the path <span class="math notranslate nohighlight">\(L \rightarrow S \leftarrow A\)</span> that is of equal magnitude, but opposite direction, as the association via the path <span class="math notranslate nohighlight">\(L \rightarrow A\)</span>. The net result is a perfect cancellation of the associations and matching leads to unfaithfulness.</p></li>
</ul>
</li>
<li><p>Faithfulness may be violated when there exist deterministic relations between variables on the graph.</p></li>
</ul>
</li>
</ul>
</section>
<section id="a-structural-classification-of-bias">
<h3>6.5 A structural classification of bias<a class="headerlink" href="#a-structural-classification-of-bias" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>We say that there is <em>systematic bias</em> when the data are insufficient to identify–compute–the causal effect even with an infinite sample size.</p>
<ul>
<li><p>Informally, we often refer to systematic bias as any structural association between treatment and outcome that does not arise from the causal effect of treatment on outcome in the population of interest</p></li>
</ul>
</li>
<li><p>For the average causal effect in the entire population, we say that there is (unconditional) bias when <span class="math notranslate nohighlight">\(Pr[Y^{a=1} =1]− Pr[Y^{a=0}=1]=Pr[Y =1|A =1]− Pr [Y =1|A =0]\)</span>, which is the case when (unconditional) exchangeability <span class="math notranslate nohighlight">\(Y^{a} \perp\!\!\!\perp A\)</span> does not hold.</p>
<ul>
<li><p>For the average causal effects within levels of <span class="math notranslate nohighlight">\(L\)</span>, we say that there is <em>conditional bias</em> whenever <span class="math notranslate nohighlight">\(Pr[Y^{a=1}=1|L = l] − Pr[Y^{a=0}=1|L = l]\)</span> differs from <span class="math notranslate nohighlight">\(Pr[Y =1|L=l, A =1]− Pr [Y =1|L=l, A =0]\)</span> for at least one stratum <span class="math notranslate nohighlight">\(l\)</span>, which is generally the case when conditonal exchangeability <span class="math notranslate nohighlight">\(Y^{a} \perp\!\!\!\perp A|L=l\)</span> doesn not hold for all <span class="math notranslate nohighlight">\(a\)</span> and <span class="math notranslate nohighlight">\(l\)</span>.</p></li>
</ul>
</li>
<li><p>Absence of (unconditional) bias implies that the association measure (e.g., associational risk ratio or difference) in the population is a consistent estimate of the corresponding effect measure (e.g., causal risk ratio or difference) in the population.</p></li>
</ul>
<p><em>The following three chapters (7, 8, 9) are about different sources of biases in causal analysis, which are</em></p>
<ul class="simple">
<li><p>Confounding: common cause of intervention and outcome</p></li>
<li><p>Selection bias: common effect</p></li>
<li><p>Measurement bias or information bias</p></li>
</ul>
</section>
<section id="the-structure-of-effect-modification">
<h3>6.6 The structure of effect modification<a class="headerlink" href="#the-structure-of-effect-modification" title="Permalink to this headline">#</a></h3>
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/mj56N4_2022_08_09.png" width="40%">
<ul>
<li><p>The causal diagram in Figure 6.11 includes the effect modifier <span class="math notranslate nohighlight">\(V\)</span> with an arrow into the outcome <span class="math notranslate nohighlight">\(Y\)</span> but no arrow into treatment <span class="math notranslate nohighlight">\(A\)</span> (which is randomly assigned and thus independent of <span class="math notranslate nohighlight">\(V\)</span>).</p>
<ul class="simple">
<li><p>First, the causal diagram in Figure 6.11 would still be a valid causal diagram if it did not include <span class="math notranslate nohighlight">\(V\)</span> because <span class="math notranslate nohighlight">\(V\)</span> is not a common cause of <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(Y\)</span>. It is only because the causal question makes reference to <span class="math notranslate nohighlight">\(V\)</span> (i.e., what is the average causal effect of <span class="math notranslate nohighlight">\(A\)</span> on <span class="math notranslate nohighlight">\(Y\)</span> within levels of <span class="math notranslate nohighlight">\(V\)</span>?), that <span class="math notranslate nohighlight">\(V\)</span> needs to be included on the causal diagram.</p></li>
<li><p>Second, the causal diagram in Figure 6.11 does not necessarily indicate the presence of effect modification by <span class="math notranslate nohighlight">\(V\)</span>.</p></li>
</ul>
</li>
<li><p>Many effect modifiers, however, do not have a causal effect on the outcome. Rather, they are surrogates for variables that have a causal effect on the outcome.</p>
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/b81jQg_2022_08_09.png" width="40%">
<ul class="simple">
<li><p>Ananalys is stratified by <span class="math notranslate nohighlight">\(S\)</span> (but not by <span class="math notranslate nohighlight">\(V\)</span>) will generally detect effect modification by <span class="math notranslate nohighlight">\(S\)</span> even though the variable that truly modifies the effect of <span class="math notranslate nohighlight">\(A\)</span> on <span class="math notranslate nohighlight">\(Y\)</span> is <span class="math notranslate nohighlight">\(V\)</span>.</p>
<ul>
<li><p>The variable <span class="math notranslate nohighlight">\(S\)</span> is a <em>surrogate effect modifier</em> where as the variable <span class="math notranslate nohighlight">\(V\)</span> is a <em>causal effect modifier</em></p>
<ul>
<li><p>A surrogate effect modifier is simply a variable associated with the causal effect modifier.</p></li>
</ul>
</li>
<li><p>Because causal and surrogate effect modifiers are often indistinguishable in practice, the concept of effect modification comprises both.</p></li>
</ul>
</li>
<li><p>surrogate effect modifiers can be associated with the causal effect modifier by structures including common causes, conditioning on common effects, or cause and effect.</p></li>
</ul>
</li>
</ul>
<hr>
</section>
</section>
<section id="chapter-7-confounding">
<h2>Chapter 7 Confounding<a class="headerlink" href="#chapter-7-confounding" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Key ideas/points in this chapter</p>
<ul>
<li><p>Defintion of confounding and confounder (7.3 &amp; 7.4)</p>
<ul>
<li><p>What are the issues with the traditional defintion of confounder? why doesn’t it work? And how to fix them?</p></li>
</ul>
</li>
<li><p>What are the common types of confoundings? (7.1)</p></li>
<li><p>What is the back door criterion (and the front door fomula)? (7.3, 7.6)</p></li>
<li><p>How to adjust for confounding?</p></li>
<li><p>What is the Single-world intervention graph (SWIG)? (7.5)</p></li>
</ul>
</li>
</ul>
<section id="confounding-and-confounders-7-1-7-4">
<h3>Confounding and confounders (7.1 &amp; 7.4)<a class="headerlink" href="#confounding-and-confounders-7-1-7-4" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>Confounding (7.1)</p>
<ul>
<li><p>The bias caused by shared causes of treatment and outcome</p>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>In a causal DAG, a backdoor path is a noncausal path between treatment and outcome that remains even if all arrows pointing from treatment to other variables (the descendants of treatment) are removed. That is, the path has an arrow pointing into treatment.</p>
</aside>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>The alternative definition can be equivalently expressed as follows: confounding is “any systematic bias that would be eliminated by randomized assignment of <span class="math notranslate nohighlight">\(A\)</span>”.</p>
</aside>
<ul class="simple">
<li><p>The structure of confounding can be represented by using causal diagrams, i.e. when there is a <strong>backdoor path</strong> exists</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>However, this traditional approach may lead to inappropriate adjustment.</p>
</aside>
<ul>
<li><p>(7.4) Under the traditional approach, a confounder was defined as a variable that meets the following three conditions:</p>
<ul class="simple">
<li><p>(1) it is associated with the treatment,</p></li>
<li><p>(2) it is associated with the outcome conditional on the treatment (with “conditional on the treatment” often replaced by “in the untreated”), and</p></li>
<li><p>(3) it does not lie on a causal pathway between treatment and outcome.</p></li>
</ul>
</li>
<li><p>An <strong>approach based on a definition of confounder</strong> (i.e. the traditional approach) that relies almost exclusively on statistical considerations may lead, as shown by Figures 7.4 and 7.7, to the wrong advice: adjust for a “confounder” even when structural confounding does not exist.</p>
<ul class="simple">
<li><p>The problem arises because the traditional approach starts by defining confounders in the absence of sufficient causal knowledge about the sources of confounding, and then mandates adjustment for those so-called confounders.</p></li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/3zitud_2022_08_31.png" width="40%">
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/wTAfwk_2022_08_31.png" width="40%">
</li>
<li><p>Fixing the traditional definition of confounder:</p>
<ol class="simple">
<li><p>Replace condition (3) by the condition that “there exist variables <span class="math notranslate nohighlight">\(L\)</span> and <span class="math notranslate nohighlight">\(U\)</span> such that there is conditional exchangeability within their joint levels <span class="math notranslate nohighlight">\(Y^a \perp\!\!\!\perp A|L, U\)</span>.</p></li>
<li><p>Replace conditions (1) and (2) by the following condition: <span class="math notranslate nohighlight">\(U\)</span> can be decomposed into two disjoint subsets <span class="math notranslate nohighlight">\(U_1\)</span> and <span class="math notranslate nohighlight">\(U_2\)</span> (i.e., <span class="math notranslate nohighlight">\(U=U_1\cup U_2\)</span> and <span class="math notranslate nohighlight">\(U=U_1\cap U_2\)</span> is empty) such that (i) <span class="math notranslate nohighlight">\(U_1\)</span> and <span class="math notranslate nohighlight">\(A\)</span> are not associated within strata of <span class="math notranslate nohighlight">\(L\)</span>, and (ii) <span class="math notranslate nohighlight">\(U_2\)</span> and <span class="math notranslate nohighlight">\(A\)</span> are not associated within joint strata of <span class="math notranslate nohighlight">\(A\)</span>, <span class="math notranslate nohighlight">\(L\)</span>, and <span class="math notranslate nohighlight">\(U_1\)</span>.The variables in <span class="math notranslate nohighlight">\(U_1\)</span> may be associated with the variables in <span class="math notranslate nohighlight">\(U_2\)</span>. <span class="math notranslate nohighlight">\(U_1\)</span> can always be chosen to be the largest subset of <span class="math notranslate nohighlight">\(U\)</span> that is unassociated with treatment.</p></li>
</ol>
</li>
</ul>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>A structural approach to confounding emphasizes that causal inference from observational data requires a priori causal knowledge. This causal knowledge is summarized in a causal DAG that encodes the researchers’ beliefs or assumptions about the causal network.</p>
</aside>
<ul class="simple">
<li><p>In contrast, a <strong>structural approach</strong> starts by explicitly identifying the sources of confounding–the common causes of treatment and outcome that, were they all measured, would be sufficient to adjust for confounding–and then identifies a sufficient set of adjustment variables.</p>
<ul>
<li><p>The structural approach makes clear that including a particular variable in a sufficient set depends on the variables already included in the set.</p></li>
<li><p>Given a causal DAG, confounding is an absolute concept whereas confounder is a relative one.</p></li>
</ul>
</li>
<li><p>the structural approach to confounding has two important advantages.</p>
<ul>
<li><p>First, it prevents inconsistencies between beliefs and actions.</p></li>
<li><p>Second, the researchers’ assumptions about confounding become explicit and therefore can be explicitly criticized by other investigators.</p></li>
</ul>
</li>
</ul>
</section>
<section id="the-structure-type-of-confounding-7-1">
<h3>The structure (type) of confounding (7.1)<a class="headerlink" href="#the-structure-type-of-confounding-7-1" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>Healthy worker bias: <em>e.g. the effect of working as a firefighter on the risk of death will be confounded if “being physically fit” is a cause of both being an active firefighter and having a lower mortality rate.</em></p>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>channeling: a term to describe the bias created by patient-specific risk factors that encourage doctors to use certain drug within a class of drugs.</p>
</aside>
</li>
<li><p>Confounding by indication or channeling: <em>e.g. the effect of drug on teh risk of disease will be confounded if the drug is more likely to be prescribed to individuals with certain condition that is both an indication for treatment and a risk factor for the disease.</em></p></li>
<li><p>Reverse causation: <em>e.g. the effect of behavior on the risk of death will be confounded if the behavior is associated with another behavior that has a causal effect on death and tends to co-occur with the behavior.</em></p></li>
<li><p>Linkage disequilibrium or population stratification: <em>e.g. the effect of a DNA sequence on the risk of developing certain trait will be confounded if there exists another DNA sequence that has a causal effect on y and is more frequent among people carrying the first DNA sequence.</em></p></li>
</ul>
</section>
<section id="confounding-and-exchangeability-7-2-backdoor-criterion-7-3-front-door-criterion-7-6">
<h3>Confounding and exchangeability (7.2), Backdoor criterion (7.3) &amp; front door criterion (7.6)<a class="headerlink" href="#confounding-and-exchangeability-7-2-backdoor-criterion-7-3-front-door-criterion-7-6" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>The presence of common causes of treatment and outcome causes confounding because it creates an open backdoor path</p></li>
<li><p>A open backdoor path can be block by conditioning on a variable on the path</p></li>
<li><p>A backdoor path is blocked if there is a collider on the path; conditioning on the collider opens the backdoor path</p>
<ul class="simple">
<li><p>The definition of collider is pathspecific: <span class="math notranslate nohighlight">\(L\)</span> is a collider on the path <span class="math notranslate nohighlight">\(A\leftarrow U_2 \rightarrow L \leftarrow U_1 \rightarrow Y\)</span> , but not on the path <span class="math notranslate nohighlight">\(A \leftarrow L \leftarrow U_1 \rightarrow Y\)</span>.</p></li>
<li><p>conditioning on a collider, which happens to be a common effect, may open a previously blocked backdoor path and introduces selection bias.</p></li>
</ul>
</li>
<li><p>In Figure 7.5, the bias is intractable: attempting to block the confounding path opens a selection bias path. There is neither unconditional exchangeability nor conditional exchangeability given <span class="math notranslate nohighlight">\(L\)</span>.</p>
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/New6uk_2022_08_31.png" width="40%">
<ul>
<li><p>A solution to the bias in Figure 7.5 would be to measure either (i) a variable <span class="math notranslate nohighlight">\(L_1\)</span> between <span class="math notranslate nohighlight">\(U_1\)</span> and either <span class="math notranslate nohighlight">\(L\)</span> or <span class="math notranslate nohighlight">\(Y\)</span> (condition on <span class="math notranslate nohighlight">\(L_1\)</span> is adequate), or (ii) a variable <span class="math notranslate nohighlight">\(L_2\)</span> between <span class="math notranslate nohighlight">\(U_2\)</span> and either <span class="math notranslate nohighlight">\(L\)</span> or <span class="math notranslate nohighlight">\(A\)</span> (condition on both <span class="math notranslate nohighlight">\(L_2\)</span> and <span class="math notranslate nohighlight">\(L\)</span>).</p>
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/0Eo2Ko_2022_08_31.png" width="40%">
</li>
</ul>
</li>
<li><p>The front door formula</p>
<ul>
<li><p>Given the following DAG, where U is an unobserved confounder, the average causal effect of A on Y cannot be idenfitied with the standardization or IP weighting methods to compurate the counterfactual risk <span class="math notranslate nohighlight">\(Pr(Y^a=1)\)</span>.</p>
<img src="https://cdn.jsdelivr.net/gh/askming/upic@master/uPic/CzdbwT_2022_08_05.png" width='30%'>
</li>
</ul>
</li>
</ul>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>this identification formula is called front door adjustment because it relies on the existence of a path from <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(Y\)</span> that, contrary to a backdoor path, goes through a descendant <span class="math notranslate nohighlight">\(M\)</span> of <span class="math notranslate nohighlight">\(A\)</span> that completely mediates the effect of <span class="math notranslate nohighlight">\(A\)</span> on <span class="math notranslate nohighlight">\(Y\)</span>.</p>
</aside>
<ul class="simple">
<li><p>Instead, the so-called front door formula can be used to calculate the counterfactual</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
  Pr(Y^a=1) = \sum_m Pr(M=m|A=a)\sum_{a'}Pr(Y=1|M=m, A=a')Pr(A=a')
  \]</div>
</section>
<section id="single-world-intervention-graphs-7-5">
<h3>Single-world intervention graphs (7.5)<a class="headerlink" href="#single-world-intervention-graphs-7-5" title="Permalink to this headline">#</a></h3>
</section>
<section id="confounding-adjustment-7-6">
<h3>Confounding adjustment (7.6)<a class="headerlink" href="#confounding-adjustment-7-6" title="Permalink to this headline">#</a></h3>
<hr>
</section>
</section>
<section id="chapter-8-selection-bias">
<h2>Chapter 8 Selection bias<a class="headerlink" href="#chapter-8-selection-bias" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Source/structure (type of) selection bias</p></li>
<li><p>Selection bias vs confounding and censoring</p></li>
<li><p>How to adjust selection bias</p></li>
<li><p>How to avoid selection bias</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./Stats"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>
    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="Book-Analysis%20of%20Observational%20Health%20Care%20Data%20Using%20SAS.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">[book] Analysis of Observational Health Care Data Using SAS</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="Book-Causal_inference_in_statistics_a_primer.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">[book] Causal inference in statistics <em>a primer</em></p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Ming Yang<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>