
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Survival Analysis &#8212; Study Notes</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script src="https://wavedrom.com/skins/default.js"></script>
    <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How R searches and finds stuff" href="../Stats_Comp/Note-How%20R%20searches%20and%20finds%20stuff.html" />
    <link rel="prev" title="Sample size calculation for the Wilcoxon-Mann-Whitney test adjusting for ties" href="Note-Sample_size_calculation_with_WMW_test.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Study Notes</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Study Notes Index (knowledge base structure)
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Statistics
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Book-Analysis%20of%20Observational%20Health%20Care%20Data%20Using%20SAS.html">
   [book] Analysis of Observational Health Care Data Using SAS
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Book-Causal%20Inference%20What%20If.html">
   [book] Causal Inference: What If
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Book-Causal_inference_in_statistics_a_primer.html">
   [book] Causal inference in statistics
   <em>
    a primer
   </em>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Book-Data_Analysis_Using_Regression_and_Multilevel_Hierarchical_Models.html">
   [book] Data Analysis Using Regression and Multilevel/Hierarchical Models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Book-Fundamentals%20of%20Clinical%20Trials%20%284th%20edition%29.html">
   [book] Fundamentals of Clinical Trials (4th edition)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Book-Group%20Sequential%20and%20Confirmatory%20Adaptive%20Designs%20in%20Clinical%20Trials.html">
   [book] Group Sequential and Confirmatory Adaptive Designs in Clinical Trials
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Book-Regression%20Modeling%20Strategies.html">
   [book] Regression Modeling Strategies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Adaptive%20Trial%20Design.html">
   Adaptive Clinical Trial Design
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Analysis%20of%20Ordinal%20Outcome.html">
   Analysis of ordinal outcome
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Analysis%20of%20Stratified%20Randomization%20Trial%20Data.html">
   Why analysis of stratified randomization trial data need to account for the stratification factors?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Association%20vs.%20Prediction%20vs.%20Causation.html">
   Association vs. Prediction vs. Causation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Baseline%20Adaptive%20Randomization.html">
   Baseline adaptive randomization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Bayesian%20optimization.html">
   Exploring Bayesian Optimization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Causal%20inference%20general.html">
   Causal Inference General Study Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Competing_Risk_Regression.html">
   Competing risk models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Correlated%20Data%20Analysis.html">
   Correlated/Longitudinal Data Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Cox_PH_model.html">
   ​Cox PH model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Dirichlet%20process.html">
   Dirichlet process
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-FDA%20guidances%20for%20industry.html">
   Notes on FDA Guidances for Industry
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Gaussian%20process.html">
   Gaussain Process
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Group_Sequential_Trial_Design.html">
   Notes on Group Sequential Trial Design​
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-ICH%20guidelines.html">
   Notes on ICH guidelines​
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-MDD%20%26%20Effect%20size.html">
   Power,
   <strong>
    MDD
   </strong>
   /
   <strong>
    E
   </strong>
   (minimum detectable difference/effect), and
   <strong>
    Effect size
   </strong>
   in clinical trials
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Meta-Analysis.html">
   Meta-analysis​
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Missing%20data.html">
   Missing data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Model%20comparison%20methods.html">
   Model comparison methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Monte%20Carlo%20method.html">
   Monte Carlo Method
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Multicolinearity.html">
   Multicolinearity
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Multiplicity%20in%20Clinical%20Trials.html">
   Multiplicity in Clinical Trials
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Non-inferiority%20equivalence%20superiority%20test.html">
   Non-inferiority/equivalence/superiority test basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Observational%20study%20design.html">
   Observational study design
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Propensity%20score%20methods.html">
   Propensity Score Methods &amp; Implementation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Quantile%20regression.html">
   Quantile regression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Note-Sample_size_calculation_with_WMW_test.html">
   Sample size calculation for the Wilcoxon-Mann-Whitney test adjusting for ties
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Survival Analysis
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Statistical computing
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Stats_Comp/Note-How%20R%20searches%20and%20finds%20stuff.html">
   How R searches and finds stuff
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Stats_Comp/Note-Pandas.html">
   Pandas study note
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Stats_Comp/Note-R%20notes.html">
   R study notes/tips
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Stats_Comp/Note-googleVis.html">
   Google R package googleVis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Stats_Comp/Note-matplotlib.html">
   Notes on
   <code class="docutils literal notranslate">
    <span class="pre">
     matplotlib
    </span>
   </code>
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  DS/ML
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Book-Hands-On%20Machine%20Learning%20with%20Scikit-Learn%20and%20TensorFlow.html">
   [book] Hands-On Machine Learning with Scikit-Learn and TensorFlow
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Book-Python%20Data%20Science%20Handbook.html">
   [book] Python Data Science Handbook
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Course-Udemy-%20Python%20for%20Data%20Science%20and%20Machine%20Learning%20Bootcamp.html">
   Udemy: Python for Data Science and Machine Learning Bootcamp
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Note-Boosting.html">
   Boosting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Note-Cluster%20analysis.html">
   Cluster analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Note-Machine%20Learning%20%28General%29.html">
   ​Machine Learning (General)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Note-Naive%20Bayes.html">
   Naive Bayes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Note-Stochasitic%20Gradient%20Descent.html">
   Stochastic Gradient Decent (SGD)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DS_ML/Note-Tree%2C%20Random%20Forest%20%28Bagging%29.html">
   Tree/Random Forest (Bagging)
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Computer science
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Course-%E5%BB%96%E9%9B%AA%E5%B3%B0python%E6%95%99%E7%A8%8B%E7%AC%94%E8%AE%B0.html">
   廖雪峰python教程笔记
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-HTML%20basics.html">
   HTML Basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-Hard%20SQL%20interview%20questions.html">
   Hard Data Analyst SQL Interview Questions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-Inside%20look%20at%20modern%20web%20browser.html">
   Inside look at modern web browser
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-Learning%20React.html">
   Learning React
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-Learning%20Rust.html">
   Learning Rust
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-Modern%20JS%20explained.html">
   Modern JavaScript Explained
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-Python%20numpy.html">
   Numpy study notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-SQL%20Study%20Notes.html">
   SQL study notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CS/Note-git%20and%20github.html">
   git and github
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Math
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Math/Course-Essence%20of%20linear%20algebra.html">
   Essence of linear algebra
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Miscellaneous
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Miscellaneous/Early%20managment%20of%20patients%20with%20AIS.html">
   Early management of patients with acute ischemic stroke
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Miscellaneous/Miscellaneous%20Notes.html">
   Miscellaneous Study Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Miscellaneous/Phamaceutical%20development.html">
   Pharmacedutical development
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Miscellaneous/Sim-Coin%20flip.html">
   :bulb: Q: fair coin, # of flips to get two consecutive side (H or T)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Miscellaneous/Sim-Generate%20random%20number%20between%201%20to%207.html">
   Generate random number 1 to 7 using a fair dice
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/askming/study_notes"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/askming/study_notes/issues/new?title=Issue%20on%20page%20%2FStats/Note-Survival_Analysis.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/Stats/Note-Survival_Analysis.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#survival-analysis-general">
   Survival analysis general
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#definitions-of-survival-endpoints">
     Definitions of survival endpoints
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#counting-process-representation">
     Counting process representation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#censoring">
     Censoring
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-intensity">
     The intensity
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hazrd-models">
     Hazrd models
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cox-ph-model">
     <span class="xref myst">
      Cox PH model
     </span>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#time-dependent-covariates-and-immortal-time-bias">
     Time-dependent covariates and immortal time bias
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#competing-risk-model">
     <span class="xref myst">
      Competing risk model
     </span>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#prediction-using-hazard-models">
     Prediction using hazard models
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#prediction-in-the-absence-competing-risks">
       Prediction in the absence competing risks
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#prediction-with-competing-risks">
       Prediction with competing risks
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sample-size-calculation-wassmer2016group">
   Sample size calculation
   <span class="xref cite cite-p">
    wassmer2016group
   </span>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#log-rank-test">
     Log-rank test
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#total-number-of-events-rightarrow-total-sample-size">
     Total number of events
     <span class="math notranslate nohighlight">
      \(\rightarrow\)
     </span>
     total sample size
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Survival Analysis</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#survival-analysis-general">
   Survival analysis general
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#definitions-of-survival-endpoints">
     Definitions of survival endpoints
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#counting-process-representation">
     Counting process representation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#censoring">
     Censoring
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-intensity">
     The intensity
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hazrd-models">
     Hazrd models
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cox-ph-model">
     <span class="xref myst">
      Cox PH model
     </span>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#time-dependent-covariates-and-immortal-time-bias">
     Time-dependent covariates and immortal time bias
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#competing-risk-model">
     <span class="xref myst">
      Competing risk model
     </span>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#prediction-using-hazard-models">
     Prediction using hazard models
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#prediction-in-the-absence-competing-risks">
       Prediction in the absence competing risks
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#prediction-with-competing-risks">
       Prediction with competing risks
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sample-size-calculation-wassmer2016group">
   Sample size calculation
   <span class="xref cite cite-p">
    wassmer2016group
   </span>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#log-rank-test">
     Log-rank test
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#total-number-of-events-rightarrow-total-sample-size">
     Total number of events
     <span class="math notranslate nohighlight">
      \(\rightarrow\)
     </span>
     total sample size
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="survival-analysis">
<h1>Survival Analysis<a class="headerlink" href="#survival-analysis" title="Permalink to this headline">#</a></h1>
<hr>
<section id="survival-analysis-general">
<h2>Survival analysis general<a class="headerlink" href="#survival-analysis-general" title="Permalink to this headline">#</a></h2>
<section id="definitions-of-survival-endpoints">
<h3>Definitions of survival endpoints<a class="headerlink" href="#definitions-of-survival-endpoints" title="Permalink to this headline">#</a></h3>
<p><em>Guidance for Industry Clinical Trial Endpoints for the Approval of Cancer Drugs and Biologics</em></p>
<ul class="simple">
<li><p>OS: overall survival. time from randomization to death from any cause, and is measured in ITT population.</p></li>
<li><p>PFS: time from randomization until objective tumor progression or death.</p></li>
<li><p>TTP: time to progression. time from randomization until objective rumor progression; doesn’t include deaths</p></li>
<li><p>DFS: disease free survival. time from randomization until recurrence of tumor or death for any cause. usually used in the adjuvant setting after definitive surgery or rediotherapy</p></li>
<li><p>ORR: objective response rate. proportion of patients with tumor size reduction of a predefined amount for a minimum time period.</p></li>
</ul>
</section>
<section id="counting-process-representation">
<h3>Counting process representation<a class="headerlink" href="#counting-process-representation" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>The process <span class="math notranslate nohighlight">\(Y_i(t)\)</span> is equal to 1 while a person is known to be at risk and 0 otherwise (<span class="math notranslate nohighlight">\(Y_i(t) = I(V_i &lt; t \le T_i)\)</span>, where <span class="math notranslate nohighlight">\(V_i\)</span> is the time of entering the study) and the process <span class="math notranslate nohighlight">\(N_i(t)\)</span> denotes the number of observed events by time <span class="math notranslate nohighlight">\(t\)</span>, here simply given by <span class="math notranslate nohighlight">\(N_i(t) = I(V_i &lt; t \le T_i, \delta_i=1)\)</span></p></li>
<li><p>Defining <span class="math notranslate nohighlight">\(dN_i(t) = N_i(t) - N_i(t-)\)</span>, observation of the event at time <span class="math notranslate nohighlight">\(t\)</span> can then be represented by <span class="math notranslate nohighlight">\(dN_i(t)= 1\)</span>, that is, the counting process for individual <span class="math notranslate nohighlight">\(i\)</span> increments by 1 at that time.</p></li>
</ul>
</section>
<section id="censoring">
<h3>Censoring<a class="headerlink" href="#censoring" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><strong>Independent censoring</strong>: A basic assumption that the information that a patient has <em>not been censored</em> at a certain time point does not carry any information about his/her prognosis beyond that time point.</p>
<ul>
<li><p>The assumption can be weakened to <em><strong>conditionally independent censoring</strong></em>, i.e. independent censoring within a group of patients with a certain set of characteristics, defined by the covariates available in the study data base.</p></li>
<li><p><em><strong>Administrative censoring</strong></em>: censoring at a certain calendar time due to the end of study, is a common example of independent censoring, as the censoring mechanism is not related to individual patient prognosis.</p></li>
</ul>
</li>
</ul>
</section>
<section id="the-intensity">
<h3>The intensity<a class="headerlink" href="#the-intensity" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>Definition</p></li>
</ul>
<p>\begin{array}
&amp; \lambda_i(t) &amp; \approx P(\text{event in} (t, t+dt)|\text{past at time } t-)/dt\
&amp; = P(dN_i(t) = 1|H_i(t-))/dt
\end{array}</p>
<ul>
<li><p>where <span class="math notranslate nohighlight">\(H_i(t-) = (N_i(s), Y_i(s), Z_i(s), s&lt;t)\)</span> summarizes the past information for the subject <span class="math notranslate nohighlight">\(i\)</span> that is available just before time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p>More formally, <span class="math notranslate nohighlight">\(\lambda_i(t) = \lim_{\Delta\rightarrow 0} P(dN_i(t) = 1 | H_i(t-)/\Delta t)\)</span></p></li>
<li><p>Hazard function</p>
<div class="math notranslate nohighlight">
\[
  \lambda(t) = -\frac{d\log S(t)}{dt}
  \]</div>
</li>
<li><p>When no time-dependent covariates are considered in <span class="math notranslate nohighlight">\(H_i(t)\)</span>, the intensity simply equals to the hazard.</p></li>
<li><p>When there is only one type of event, there is an one-to-one correspondce between hazard function <span class="math notranslate nohighlight">\(\lambda(t)\)</span> and <span class="math notranslate nohighlight">\(S(t)\)</span>, and thereby with the cumulative risk <span class="math notranslate nohighlight">\(F(t) = 1-S(t)\)</span>.</p>
<ul class="simple">
<li><p>While, if there are other events competing with the event of interest, <span class="math notranslate nohighlight">\(\lambda(t)\)</span> is a <em>transition hazard</em> (or <em>cause-specific hazard</em>) from state 0 to state 1. In this case, a one-to-one correspondence between the single cause-specific hazard and the absolute probabilities no longer exists.</p></li>
</ul>
</li>
<li><p><strong>Interpretation of the intentisty</strong></p>
<ul class="simple">
<li><p>Given the information that is available so far for the subject (i.e. the subject is still observed to be at risk at time <span class="math notranslate nohighlight">\(t\)</span>), what is the probability per time unit that the subject experiences the event in the next little time interval from <span class="math notranslate nohighlight">\(t\)</span> to <span class="math notranslate nohighlight">\(t + dt\)</span>?</p></li>
<li><p>The intensity gives a <em>dynamical description</em> of how events occur over time and, in this description, all aspects of the past observed for the subject up to time t may be taken into account, such as (time-dependent) covariates and, possibly, previous events.</p></li>
</ul>
</li>
<li><p>Other notes</p>
<ul class="simple">
<li><p>the hazard function (in contrast to the survival function) can still be studies under censoring mechanism since it relies exclusively on the information on the individuals still at risk (assuming the independent censoring assumption to hold)</p></li>
<li><p>One of the greatest strengths of intensity-basedmodels is that one can examine the effects of both baseline covariates (ie, information available at time of entry into the study) and time-dependent covariates that are updated during follow-up.</p></li>
<li><p>Using a hazard regression model is that it “corrects for non-independent censoring” in the sense that regression coefficients are estimated consistently even if censoring depends on covariates, as long as these covariates are included as predictors in the hazard model (==how to understand this?==)</p></li>
</ul>
</li>
</ul>
</section>
<section id="hazrd-models">
<h3>Hazrd models<a class="headerlink" href="#hazrd-models" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>Estimating the hazard <em>non-parametrically</em> requires some sort of smoothing. What may be estimated non-parametrically is the <em>cumulative hazard</em> <span class="math notranslate nohighlight">\(\Lambda(t) = \int_0^t\lambda(u)du\)</span>. This may be done with the <em>Nelson-Aalen estimator</em></p>
<div class="math notranslate nohighlight">
\[
  \hat{\Lambda}(t) = \int_0^t \frac{dN(u)}{Y(u)} du= \sum_{i: T_i\le t} \frac{\delta_i}{Y(T_i)},
  \]</div>
<p>where <span class="math notranslate nohighlight">\(Y(t) = \sum_i Y_i(t)\)</span> and <span class="math notranslate nohighlight">\(N(t) = \sum_i N_i(t)\)</span>.</p>
<ul class="simple">
<li><p>This is an increasing step function with steps at each observed event time, the step size at <span class="math notranslate nohighlight">\(t\)</span> being inversely proportional to the number <span class="math notranslate nohighlight">\(Y(t)\)</span> at risk.</p></li>
<li><p>The approximate “local slope” of <span class="math notranslate nohighlight">\(\hat{\Lambda}\)</span> at <span class="math notranslate nohighlight">\(t\)</span> reflects the hazard at that time.</p></li>
</ul>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="cox-ph-model">
<h3><a class="reference internal" href="Note-Cox_PH_model.html"><span class="doc std std-doc">Cox PH model</span></a><a class="headerlink" href="#cox-ph-model" title="Permalink to this headline">#</a></h3>
</section>
<section id="time-dependent-covariates-and-immortal-time-bias">
<h3>Time-dependent covariates and immortal time bias<a class="headerlink" href="#time-dependent-covariates-and-immortal-time-bias" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><strong>Immortal time bias</strong>: including in the model the value of time-dependent covarite(s) collected after the time of event outcome.</p>
<ul>
<li><p>It is crucial that only information reflecting covariate values observed before time t (ie, from the “past” at t) is used to define the value of a variable <span class="math notranslate nohighlight">\(Z(t)\)</span> at time <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
<li><p>A common example is to group patients at time t = 0 according to the use of drugs or treatments at any time during the follow-up even if many might have started their use only at some time after time <span class="math notranslate nohighlight">\(t = 0\)</span> (“ever treated” vs “never treated”)</p></li>
<li><p>Another example can be the study of total number doses recevied and survial outcome. A patient generally receive more treatment doses when he/she lives longer.</p></li>
<li><p>In all of the above cases, creation of a well-defined time-dependent covariate where <span class="math notranslate nohighlight">\(Z(t)\)</span> does not depend on any of <span class="math notranslate nohighlight">\(Z(s), N(s)\)</span>, or <span class="math notranslate nohighlight">\(Y(s)\)</span> for any <span class="math notranslate nohighlight">\(s &gt; t\)</span> repairs the bias.</p></li>
</ul>
</li>
</ul>
</section>
<section id="competing-risk-model">
<h3><a class="reference internal" href="Note-Competing_Risk_Regression.html"><span class="doc std std-doc">Competing risk model</span></a><a class="headerlink" href="#competing-risk-model" title="Permalink to this headline">#</a></h3>
</section>
<section id="prediction-using-hazard-models">
<h3>Prediction using hazard models<a class="headerlink" href="#prediction-using-hazard-models" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>Communication is usually easier in terms of the absolute risk, that is, the probability of the event occurring in some interval or, more generally, the probability of being in a certain state by time t.</p></li>
</ul>
<section id="prediction-in-the-absence-competing-risks">
<h4>Prediction in the absence competing risks<a class="headerlink" href="#prediction-in-the-absence-competing-risks" title="Permalink to this headline">#</a></h4>
<ul>
<li><p>Without time-dependent covarites</p>
<div class="math notranslate nohighlight">
\[
  F(t|Z) = 1 - S(t|Z) = 1 - \exp(-\Lambda(t|Z))
  \]</div>
</li>
<li><p>From <span class="math notranslate nohighlight">\(t=0\)</span> onwards</p>
<ul class="simple">
<li><p>Using the Cox model</p>
<ul>
<li><p>If the focus is on one particular value ts (eg, the 5-year survival in cancer), a surprisingly robust estimator of <span class="math notranslate nohighlight">\(S(t_s|Z)\)</span> can often be obtained by applying administrative censoring at <span class="math notranslate nohighlight">\(t_s\)</span> and using a simple Cox model with the effects <span class="math notranslate nohighlight">\(\beta\)</span>  fixed in time provided <span class="math notranslate nohighlight">\(t_s\)</span> is not too large.</p></li>
</ul>
</li>
<li><p>Direct modeling</p>
<ul>
<li><p>If there were no censoring before ts, the survival probability <span class="math notranslate nohighlight">\(S(t_s|Z)\)</span> could be directly estimated by models for the binary outcome <span class="math notranslate nohighlight">\(I(T^* &gt; t_s)\)</span></p></li>
</ul>
</li>
</ul>
</li>
<li><p>Dynamic prediction</p>
<ul class="simple">
<li><p>Prediction at a later time <span class="math notranslate nohighlight">\(t_{\text{pred}} + t_s\)</span> built on some intermediate time <span class="math notranslate nohighlight">\(t_{\text{pred}}\)</span></p>
<ul>
<li><p>the prediction is based on a new model using the data of the individuals still alive at <span class="math notranslate nohighlight">\(t_{\text{pred}}\)</span> is known as <em>dynamic prediction</em></p></li>
<li><p>the approach of building new models using the individuals at risk at <span class="math notranslate nohighlight">\(t_{\text{pred}}\)</span> is known as <em>landmarking</em></p></li>
</ul>
</li>
</ul>
</li>
<li><p>Prediction exploiting time-dependent covariates</p>
<ul class="simple">
<li><p>Using the landmarking method, where the history of a time-dependent covariate up to <span class="math notranslate nohighlight">\(t_{\text{pred}}\)</span> is summarized in to a single statistic (e.g. the last observation) and used as a time-fixed covariate in the prediction model. Such model can only be used as a working model.</p></li>
<li><p>Using joint models of longitudinal and survial outcomes and estimate survival prob. by conditioning on the history of <span class="math notranslate nohighlight">\(Z(t)\)</span> at <span class="math notranslate nohighlight">\(t_{\text{pred}}\)</span> and <span class="math notranslate nohighlight">\(T^*\ge t_{\text{pred}}\)</span>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="prediction-with-competing-risks">
<h4>Prediction with competing risks<a class="headerlink" href="#prediction-with-competing-risks" title="Permalink to this headline">#</a></h4>
<ul>
<li><p>Ignoring competing risk(s) will produce an upwards biased estimate of the absolute risk (cumulative incidence) because by treating competing events as censorings, one pretends that the target population is one where the competing events are not operating and therefore neglects the fact that subjects who have died from competing causes can no longer experience the event of interest.</p></li>
<li><p>In such a situation it is necessary to estimate the <em>absolute risk</em>. This is the probability of experiencing event 1 at a certain time point and it depends not only on the hazard of this event but also on the probability of having survived up to this time point. And as this survival probability depends on the hazards of all events, this implies it is necessary also to estimate the intensity of the competing events.</p>
<div class="math notranslate nohighlight" id="equation-pred-comp">
<span class="eqno">(11)<a class="headerlink" href="#equation-pred-comp" title="Permalink to this equation">#</a></span>\[
  F_1(t|Z) = \int_0^t S(u|Z)d\Lambda_{01}(u|Z) = \int_0^t\exp(-\Lambda_{02}(u|Z) - \Lambda_{01}(u|Z))d\Lambda_{01}(u|Z)\label{pred_comp}
  \]</div>
<p>where <span class="math notranslate nohighlight">\(\Lambda_{02}(t|Z)\)</span> is the cumulative hazard for competing events.</p>
<ul class="simple">
<li><p>Without covariates, the estimator obtained by plugging-in Nelson-Aalen estimates for the cumulative hazard in <a class="reference internal" href="#equation-pred-comp">(11)</a> is known as the <em>Aalen-Johansen estimator</em>.</p></li>
<li><p>The intuition behind the middle term of <a class="reference internal" href="#equation-pred-comp">(11)</a> is that the integrand, <u>the survival probability</u>, <span class="math notranslate nohighlight">\(S(u|Z)\)</span> of surviving to time <span class="math notranslate nohighlight">\(u\)</span>, times <u>the conditional probability</u>, <span class="math notranslate nohighlight">\(dΛ_{01}(u|Z)\)</span> of dying from cause 1 at time <span class="math notranslate nohighlight">\(u\)</span> given survival till <span class="math notranslate nohighlight">\(u\)</span>, is the (unconditional) probability of dying from cause 1 at time <span class="math notranslate nohighlight">\(u\)</span>; <span class="math notranslate nohighlight">\(F_1(t | Z)\)</span>, the probability of dying from cause 1 by time <span class="math notranslate nohighlight">\(t\)</span> is then obtained as the sum (integral)</p></li>
</ul>
</li>
<li><p>It’s also possible to directly model <span class="math notranslate nohighlight">\(F(t|Z)\)</span>, e.g., using the Fine and Gray regression model.</p></li>
<li><p>For constant hazard <span class="math notranslate nohighlight">\(\lambda\)</span>, thus exponentially distributed survival times,</p>
<ul>
<li><p>the MLE of <span class="math notranslate nohighlight">\(\lambda\)</span> is given by</p>
<div class="math notranslate nohighlight">
\[
    \hat{\lambda} = \frac{d}{\sum_{i=1}^dx_i}
    \]</div>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(d\)</span>: total number of events</p></li>
<li><p><span class="math notranslate nohighlight">\(x_i\)</span>: event time for <span class="math notranslate nohighlight">\(i\)</span>th event</p></li>
</ul>
</li>
<li><p>If an estimate <span class="math notranslate nohighlight">\(\hat{\pi}\)</span> of the event rate in a period of length <span class="math notranslate nohighlight">\(l\)</span> is given, <span class="math notranslate nohighlight">\(\lambda\)</span> is estimated by</p>
<div class="math notranslate nohighlight">
\[
    \hat{\lambda} = \frac{-\log(1-\hat{\pi})}{l}
    \]</div>
</li>
</ul>
</li>
<li><p>with the median survival time estimate of <span class="math notranslate nohighlight">\(\hat{m}\)</span>, the estimated hazard can be estimated as</p>
<div class="math notranslate nohighlight">
\[
    \hat{\lambda} = \frac{log(2)}{\hat{m}}
    \]</div>
<ul class="simple">
<li><p>Thus, the estimate of hazard ratio is the reciprocal of the ratio of median survival time between two groups:</p></li>
</ul>
</li>
</ul>
<div class="math notranslate nohighlight">
\[
\omega = \frac{\lambda_1}{\lambda_2} = \frac{m_2}{m_1}
\]</div>
</section>
</section>
</section>
<section id="sample-size-calculation-wassmer2016group">
<h2>Sample size calculation <span id="id1">[<a class="reference internal" href="#id6" title="Gernot Wassmer and Werner Brannath. Group sequential and confirmatory adaptive designs in clinical trials. Volume 301. Springer, 2016.">Wassmer and Brannath, 2016</a>]</span><a class="headerlink" href="#sample-size-calculation-wassmer2016group" title="Permalink to this headline">#</a></h2>
<section id="log-rank-test">
<h3>Log-rank test<a class="headerlink" href="#log-rank-test" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>Test statistic for LR test</p>
<div class="math notranslate nohighlight">
\[
  LR = \frac{\sum_{i=1}^d\left(I_{2i} - \frac{n_{2i}}{n_{1i} + n_{2i}}\right)}{\sqrt{\sum_{i=1}^d\frac{n_{1i}n_{2i}}{(n_{1i} + n_{2i})^2}}}
  \]</div>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(d\)</span> is the total number of events</p></li>
<li><p><span class="math notranslate nohighlight">\(n_{1i}\)</span> and <span class="math notranslate nohighlight">\(n_{2i}\)</span> are number of patients at risk in group 1 and 2, respectively, when the <span class="math notranslate nohighlight">\(i\)</span>th event occurred.</p></li>
<li><p><span class="math notranslate nohighlight">\(I_{2i}\)</span> = 1 if the <span class="math notranslate nohighlight">\(i\)</span>th event was in group 2 and = 0 otherwise</p></li>
</ul>
</li>
<li><p>Non-parametric test as it doesn’t depend on the observed survival times but only depends on the number of patients who were at risk at the <span class="math notranslate nohighlight">\(i\)</span>th event</p></li>
<li><p>For fixed <span class="math notranslate nohighlight">\(d\)</span> and let the patients be recruited until <span class="math notranslate nohighlight">\(d\)</span> events were observed. Then the LR test statistic is approximately normally distributed</p>
<div class="math notranslate nohighlight">
\[
  LR \sim N(\sqrt{d}\frac{\sqrt{r}}{1 + r}\log(\omega), 1)
  \]</div>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\omega\)</span> is the true hazard ratio</p></li>
<li><p><span class="math notranslate nohighlight">\(r = n_2/n_1\)</span></p></li>
</ul>
<p>​	<img src="https://raw.githubusercontent.com/askming/picgo/master/Logrank_test.png" alt="Logrank_test" style="zoom:150%;" /></p>
</li>
</ul>
</section>
<section id="total-number-of-events-rightarrow-total-sample-size">
<h3>Total number of events <span class="math notranslate nohighlight">\(\rightarrow\)</span> total sample size<a class="headerlink" href="#total-number-of-events-rightarrow-total-sample-size" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><em>Power calculation is based on total number of events not number of patients</em></p></li>
</ul>
<img src="https://raw.githubusercontent.com/askming/picgo/master/image-20201104210152614.png" alt="image-20201104210152614" style="zoom: 67%;" />
<ul>
<li><p>The first step is to determine the <strong>required number of events</strong></p>
<div class="math notranslate nohighlight">
\[
  d_f = \frac{\left(\Phi^{-1}(1-\alpha/2)+ \Phi^{-1}(1-\beta)\right)^2}{r/(1+r)^2(\log(\omega_1))^2}
  \]</div>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(H_1: \omega = \omega_1\)</span></p></li>
<li><p>Two-sided <span class="math notranslate nohighlight">\(\alpha\)</span>, power = <span class="math notranslate nohighlight">\(1-\beta\)</span></p></li>
</ul>
</li>
<li><p>From total number of events to  total sample size</p>
<div class="math notranslate nohighlight">
\[
  n = n_{f_1}+n_{f_2} = n_{f_1}(1+r) = d_f/\phi \Rightarrow n_{f_1} = \frac{d_f}{\phi*(1+r)}
  \]</div>
<ul>
<li><p><span class="math notranslate nohighlight">\(\phi\)</span> is the <strong>combined probability of an event</strong> in the two treatment groups:</p>
<div class="math notranslate nohighlight">
\[
    \phi = (\phi_{\lambda_1} + r\phi_{\lambda_2})/(1 + r)
    \]</div>
<ul>
<li><p><strong>Assuming constant hazard rate (or exponential survival time) and patients enter the trial uniformly over the recruitment time period <span class="math notranslate nohighlight">\(a\)</span></strong></p>
<div class="amsmath math notranslate nohighlight" id="equation-53b8a136-5773-4a83-b8ed-2ed0ef799d9b">
<span class="eqno">(12)<a class="headerlink" href="#equation-53b8a136-5773-4a83-b8ed-2ed0ef799d9b" title="Permalink to this equation">#</a></span>\[\begin{align}
      \phi_{\lambda_j(s)} &amp;=&amp; P_{\lambda_j}(X &lt; C)\\
      &amp;=&amp; \int_{\max\{0, s-a\}}^s P_{\lambda_j}(X&lt;c|C=c)g(c)dc\\
      &amp;=&amp; \int_{\max\{0, s-a\}}^s(1-\exp(-\lambda_jc))\frac{1}{a}dc
      \end{align}\]</div>
<p><span class="math notranslate nohighlight">\(\Rightarrow\)</span></p>
<div class="math notranslate nohighlight">
\[\begin{split}
      \phi_{\lambda_j(s)} = \left\{
      \begin{array}{ll}
      \frac{s}{a} - \frac{1-\exp(-\lambda_js)}{\lambda_ja} &amp;&amp;\text{if } s\le a\\
      1 - \exp(-\lambda_js)\frac{\exp(\lambda_ja) - 1}{\lambda_ja} &amp;&amp;\text{if } s&gt;a
      \end{array}
      \right.
      \end{split}\]</div>
</li>
<li><p>Thus, by the end of trial (i.e. <span class="math notranslate nohighlight">\(s = a+f &gt; a\)</span>)</p>
<div class="math notranslate nohighlight">
\[
      \phi_{\lambda_j}(a + f) =1-\exp(-\lambda_j(a+f))\frac{\exp(\lambda_ja)-1}{\lambda_ja}
      \]</div>
</li>
</ul>
</li>
<li><p>with increasing length <span class="math notranslate nohighlight">\(a + f\)</span> of the study, the required total sample size decreases and, given any <span class="math notranslate nohighlight">\(a\)</span>, it converges to <span class="math notranslate nohighlight">\(d\)</span>.</p></li>
</ul>
</li>
</ul>
<div class="docutils container" id="id2">
<dl class="citation">
<dt class="label" id="id6"><span class="brackets"><a class="fn-backref" href="#id1">WB16</a></span></dt>
<dd><p>Gernot Wassmer and Werner Brannath. <em>Group sequential and confirmatory adaptive designs in clinical trials</em>. Volume 301. Springer, 2016.</p>
</dd>
</dl>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./Stats"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>
    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="Note-Sample_size_calculation_with_WMW_test.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Sample size calculation for the Wilcoxon-Mann-Whitney test adjusting for ties</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../Stats_Comp/Note-How%20R%20searches%20and%20finds%20stuff.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">How R searches and finds stuff</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Ming Yang<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>